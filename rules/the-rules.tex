% This file is generated by Rulegen.

\[
\infer[{\tt forallForm}]{\Gamma \vdash {\sf forall}\,\{x : A\}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt forallEq}]{\Gamma \vdash {\sf forall}\,\{x : A\}\,B= {\sf forall}\,\{x : A'\}\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt forallFormUniv}]{\Gamma \vdash {\sf forall}\,\{x : A\}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt forallEqUniv}]{\Gamma \vdash {\sf forall}\,\{x : A\}\,B= {\sf forall}\,\{x : A'\}\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt forallSub}]{\Gamma \vdash {\sf subtype}\,({\sf forall}\,\{x : A\}\,B)\,({\sf forall}\,\{x : A'\}\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A'\,A
\\
\Gamma ,x\mathord{:}A'\vdash {\sf subtype}\,B\,B'
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt forallIntroOf}]{\Gamma \vdash (\lambda x.\,M): {\sf forall}\,\{x : A\}\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M: B
\end{stack}}
\]

\[
\infer[{\tt forallIntroEq}]{\Gamma \vdash (\lambda x.\,M)= (\lambda x.\,N): {\sf forall}\,\{x : A\}\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M= N: B
\end{stack}}
\]

\[
\infer[{\tt forallIntro}]{\Gamma \vdash {\sf forall}\,\{x : A\}\,B\:{\sf ext}\:\lambda x.\,M}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt forallElimOf}]{\Gamma \vdash M\,P: [P/x]B}{
\begin{stack}
\Gamma \vdash M: {\sf forall}\,\{x : A\}\,B
\\
\Gamma \vdash P: A
\end{stack}}
\]

\[
\infer[{\tt forallElimEq}]{\Gamma \vdash M\,P= N\,Q: [P/x]B}{
\begin{stack}
\Gamma \vdash M= N: {\sf forall}\,\{x : A\}\,B
\\
\Gamma \vdash P= Q: A
\end{stack}}
\]

\[
\infer[{\tt forallElim}]{\Gamma \vdash [P/x]B\:{\sf ext}\:M\,P}{
\begin{stack}
\Gamma \vdash {\sf forall}\,\{x : A\}\,B\:{\sf ext}\:M
\\
\Gamma \vdash P: A
\end{stack}}
\]

\[
\infer[{\tt forallEta}]{\Gamma \vdash M= (\lambda x.\,M\,x): {\sf forall}\,\{x : A\}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf forall}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt forallExt}]{\Gamma \vdash M= N: {\sf forall}\,\{x : A\}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf forall}\,\{x : A\}\,B
\\
\Gamma \vdash N: {\sf forall}\,\{x : A\}\,B
\\
\Gamma ,x\mathord{:}A\vdash M\,x= N\,x: B
\end{stack}}
\]

\[
\infer[{\tt forallExt'}]{\Gamma \vdash M= N: {\sf forall}\,\{x : A\}\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf forall}\,\{x : A'\}\,B'
\\
\Gamma \vdash N: {\sf forall}\,\{x : A''\}\,B''
\\
\Gamma ,x\mathord{:}A\vdash M\,x= N\,x: B
\end{stack}}
\]

\[
\infer[{\tt forallOfExt}]{\Gamma \vdash M: {\sf forall}\,\{x : A\}\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf forall}\,\{x : A'\}\,B'
\\
\Gamma ,x\mathord{:}A\vdash M\,x: B
\end{stack}}
\]

\[
\infer[{\tt forallFormInv1}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf forall}\,\{x : A\}\,B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt forallFormInv2}]{\Gamma \vdash [M/x]B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf forall}\,\{x : A\}\,B: {\sf type}
\\
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt arrowForm}]{\Gamma \vdash {\sf arrow}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt arrowEq}]{\Gamma \vdash {\sf arrow}\,A\,B= {\sf arrow}\,A'\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt arrowFormUniv}]{\Gamma \vdash {\sf arrow}\,A\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt arrowEqUniv}]{\Gamma \vdash {\sf arrow}\,A\,B= {\sf arrow}\,A'\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt arrowForallEq}]{\Gamma \vdash {\sf arrow}\,A\,B= {\sf forall}\,\{x : A'\}\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt arrowForallEqUniv}]{\Gamma \vdash {\sf arrow}\,A\,B= {\sf forall}\,\{x : A'\}\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt arrowSub}]{\Gamma \vdash {\sf subtype}\,({\sf arrow}\,A\,B)\,({\sf arrow}\,A'\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A'\,A
\\
\Gamma \vdash {\sf subtype}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt arrowForallSub}]{\Gamma \vdash {\sf subtype}\,({\sf arrow}\,A\,B)\,({\sf forall}\,\{x : A'\}\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A'\,A
\\
\Gamma ,x\mathord{:}A'\vdash {\sf subtype}\,B\,B'
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt forallArrowSub}]{\Gamma \vdash {\sf subtype}\,({\sf forall}\,\{x : A\}\,B)\,({\sf arrow}\,A'\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A'\,A
\\
\Gamma ,x\mathord{:}A'\vdash {\sf subtype}\,B\,B'
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt arrowIntroOf}]{\Gamma \vdash (\lambda x.\,M): {\sf arrow}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M: B
\end{stack}}
\]

\[
\infer[{\tt arrowIntroEq}]{\Gamma \vdash (\lambda x.\,M)= (\lambda x.\,N): {\sf arrow}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M= N: B
\end{stack}}
\]

\[
\infer[{\tt arrowIntro}]{\Gamma \vdash {\sf arrow}\,A\,B\:{\sf ext}\:\lambda x.\,M}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt arrowElimOf}]{\Gamma \vdash M\,P: B}{
\begin{stack}
\Gamma \vdash M: {\sf arrow}\,A\,B
\\
\Gamma \vdash P: A
\end{stack}}
\]

\[
\infer[{\tt arrowElimEq}]{\Gamma \vdash M\,P= N\,Q: B}{
\begin{stack}
\Gamma \vdash M= N: {\sf arrow}\,A\,B
\\
\Gamma \vdash P= Q: A
\end{stack}}
\]

\[
\infer[{\tt arrowElim}]{\Gamma \vdash B\:{\sf ext}\:M\,P}{
\begin{stack}
\Gamma \vdash {\sf arrow}\,A\,B\:{\sf ext}\:M
\\
\Gamma \vdash A\:{\sf ext}\:P
\end{stack}}
\]

\[
\infer[{\tt arrowEta}]{\Gamma \vdash M= (\lambda x.\,M\,x): {\sf arrow}\,A\,B}{
\begin{stack}
\Gamma \vdash M: {\sf arrow}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt arrowExt}]{\Gamma \vdash M= N: {\sf arrow}\,A\,B}{
\begin{stack}
\Gamma \vdash M: {\sf arrow}\,A\,B
\\
\Gamma \vdash N: {\sf arrow}\,A\,B
\\
\Gamma ,x\mathord{:}A\vdash M\,x= N\,x: B
\end{stack}}
\]

\[
\infer[{\tt arrowExt'}]{\Gamma \vdash M= N: {\sf arrow}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf forall}\,\{x : A'\}\,B'
\\
\Gamma \vdash N: {\sf forall}\,\{x : A''\}\,B''
\\
\Gamma ,x\mathord{:}A\vdash M\,x= N\,x: B
\end{stack}}
\]

\[
\infer[{\tt arrowOfExt}]{\Gamma \vdash M: {\sf arrow}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf forall}\,\{x : A'\}\,B'
\\
\Gamma ,x\mathord{:}A\vdash M\,x: B
\end{stack}}
\]

\[
\infer[{\tt arrowFormInv1}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf arrow}\,A\,B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt arrowFormInv2}]{\Gamma \vdash B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf arrow}\,A\,B: {\sf type}
\\
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt tarrowKind}]{\Gamma \vdash {\sf tarrow}\,A\,K: {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash K: {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt tarrowKindEq}]{\Gamma \vdash {\sf tarrow}\,A\,K= {\sf tarrow}\,A'\,K': {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma \vdash K= K': {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt tarrowForm}]{\Gamma \vdash {\sf tarrow}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt tarrowEq}]{\Gamma \vdash {\sf tarrow}\,A\,B= {\sf tarrow}\,A'\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma \vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt tarrowFormUniv}]{\Gamma \vdash {\sf tarrow}\,A\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt tarrowEqUniv}]{\Gamma \vdash {\sf tarrow}\,A\,B= {\sf tarrow}\,A'\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma \vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt tarrowArrowEq}]{\Gamma \vdash {\sf tarrow}\,A\,B= {\sf arrow}\,A'\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma \vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt tarrowArrowEqUniv}]{\Gamma \vdash {\sf tarrow}\,A\,B= {\sf arrow}\,A'\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma \vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt tarrowForallEq}]{\Gamma \vdash {\sf tarrow}\,A\,B= {\sf forall}\,\{x : A'\}\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt tarrowForallEqUniv}]{\Gamma \vdash {\sf tarrow}\,A\,B= {\sf forall}\,\{x : A'\}\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt tarrowIntroOf}]{\Gamma \vdash (\lambda x.\,M): {\sf tarrow}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M: B
\end{stack}}
\]

\[
\infer[{\tt tarrowIntroEq}]{\Gamma \vdash (\lambda x.\,M)= (\lambda x.\,N): {\sf tarrow}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M= N: B
\end{stack}}
\]

\[
\infer[{\tt tarrowIntro}]{\Gamma \vdash {\sf tarrow}\,A\,B\:{\sf ext}\:\lambda x.\,M}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt tarrowElimOf}]{\Gamma \vdash M\,P: B}{
\begin{stack}
\Gamma \vdash M: {\sf tarrow}\,A\,B
\\
\Gamma \vdash P: A
\end{stack}}
\]

\[
\infer[{\tt tarrowElimEq}]{\Gamma \vdash M\,P= N\,Q: B}{
\begin{stack}
\Gamma \vdash M= N: {\sf tarrow}\,A\,B
\\
\Gamma \vdash P= Q: A
\end{stack}}
\]

\[
\infer[{\tt tarrowElim}]{\Gamma \vdash B\:{\sf ext}\:M\,P}{
\begin{stack}
\Gamma \vdash {\sf tarrow}\,A\,B\:{\sf ext}\:M
\\
\Gamma \vdash A\:{\sf ext}\:P
\end{stack}}
\]

\[
\infer[{\tt tarrowEta}]{\Gamma \vdash M= (\lambda x.\,M\,x): {\sf tarrow}\,A\,B}{
\begin{stack}
\Gamma \vdash M: {\sf tarrow}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt tarrowExt}]{\Gamma \vdash M= N: {\sf tarrow}\,A\,B}{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash M: {\sf tarrow}\,A\,B
\\
\Gamma \vdash N: {\sf tarrow}\,A\,B
\\
\Gamma ,x\mathord{:}A\vdash M\,x= N\,x: B
\end{stack}}
\]

\[
\infer[{\tt tarrowOfExt}]{\Gamma \vdash M: {\sf tarrow}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash M: {\sf forall}\,\{x : A'\}\,B'
\\
\Gamma ,x\mathord{:}A\vdash M\,x: B
\end{stack}}
\]

\[
\infer[{\tt karrowKind}]{\Gamma \vdash {\sf karrow}\,K\,L: {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma \vdash L: {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt karrowKindEq}]{\Gamma \vdash {\sf karrow}\,K\,L= {\sf karrow}\,K'\,L': {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash K= K': {\Bbb K}_{I}
\\
\Gamma \vdash L= L': {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt karrowForm}]{\Gamma \vdash {\sf karrow}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt karrowEq}]{\Gamma \vdash {\sf karrow}\,A\,B= {\sf karrow}\,A'\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma \vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt karrowFormUniv}]{\Gamma \vdash {\sf karrow}\,A\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt karrowEqUniv}]{\Gamma \vdash {\sf karrow}\,A\,B= {\sf karrow}\,A'\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma \vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt karrowArrowEq}]{\Gamma \vdash {\sf karrow}\,A\,B= {\sf arrow}\,A'\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma \vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt karrowArrowEqUniv}]{\Gamma \vdash {\sf karrow}\,A\,B= {\sf arrow}\,A'\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma \vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt karrowForallEq}]{\Gamma \vdash {\sf karrow}\,A\,B= {\sf forall}\,\{x : A'\}\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt karrowForallEqUniv}]{\Gamma \vdash {\sf karrow}\,A\,B= {\sf forall}\,\{x : A'\}\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt karrowIntroOf}]{\Gamma \vdash (\lambda x.\,M): {\sf karrow}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M: B
\end{stack}}
\]

\[
\infer[{\tt karrowIntroEq}]{\Gamma \vdash (\lambda x.\,M)= (\lambda x.\,N): {\sf karrow}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M= N: B
\end{stack}}
\]

\[
\infer[{\tt karrowIntro}]{\Gamma \vdash {\sf karrow}\,A\,B\:{\sf ext}\:\lambda x.\,M}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt karrowElimOf}]{\Gamma \vdash M\,P: B}{
\begin{stack}
\Gamma \vdash M: {\sf karrow}\,A\,B
\\
\Gamma \vdash P: A
\end{stack}}
\]

\[
\infer[{\tt karrowElimEq}]{\Gamma \vdash M\,P= N\,Q: B}{
\begin{stack}
\Gamma \vdash M= N: {\sf karrow}\,A\,B
\\
\Gamma \vdash P= Q: A
\end{stack}}
\]

\[
\infer[{\tt karrowElim}]{\Gamma \vdash B\:{\sf ext}\:M\,P}{
\begin{stack}
\Gamma \vdash {\sf karrow}\,A\,B\:{\sf ext}\:M
\\
\Gamma \vdash A\:{\sf ext}\:P
\end{stack}}
\]

\[
\infer[{\tt karrowEta}]{\Gamma \vdash M= (\lambda x.\,M\,x): {\sf karrow}\,A\,B}{
\begin{stack}
\Gamma \vdash M: {\sf karrow}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt karrowExt}]{\Gamma \vdash M= N: {\sf karrow}\,A\,B}{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash M: {\sf karrow}\,A\,B
\\
\Gamma \vdash N: {\sf karrow}\,A\,B
\\
\Gamma ,x\mathord{:}A\vdash M\,x= N\,x: B
\end{stack}}
\]

\[
\infer[{\tt karrowOfExt}]{\Gamma \vdash M: {\sf karrow}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash M: {\sf forall}\,\{x : A'\}\,B'
\\
\Gamma ,x\mathord{:}A\vdash M\,x: B
\end{stack}}
\]

\[
\infer[{\tt intersectForm}]{\Gamma \vdash {\sf intersect}\,\{x : A\}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt intersectEq}]{\Gamma \vdash {\sf intersect}\,\{x : A\}\,B= {\sf intersect}\,\{x : A'\}\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt intersectFormUniv}]{\Gamma \vdash {\sf intersect}\,\{x : A\}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt intersectEqUniv}]{\Gamma \vdash {\sf intersect}\,\{x : A\}\,B= {\sf intersect}\,\{x : A'\}\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt intersectSub}]{\Gamma \vdash {\sf subtype}\,({\sf intersect}\,\{x : A\}\,B)\,({\sf intersect}\,\{x : A'\}\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A'\,A
\\
\Gamma ,x\mathord{:}A'\vdash {\sf subtype}\,B\,B'
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt intersectIntroOf}]{\Gamma \vdash M: {\sf intersect}\,\{x : A\}\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M: B
\end{stack}}
\]

\[
\infer[{\tt intersectIntroEq}]{\Gamma \vdash M= N: {\sf intersect}\,\{x : A\}\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M= N: B
\end{stack}}
\]

\[
\infer[{\tt intersectIntro}]{\Gamma \vdash {\sf intersect}\,\{x : A\}\,B\:{\sf ext}\:[\star /x]M}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}[A]\vdash B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt intersectElimOf}]{\Gamma \vdash M: [P/x]B}{
\begin{stack}
\Gamma \vdash M: {\sf intersect}\,\{x : A\}\,B
\\
\Gamma \vdash P: A
\end{stack}}
\]

\[
\infer[{\tt intersectElimEq}]{\Gamma \vdash M= N: [P/x]B}{
\begin{stack}
\Gamma \vdash M= N: {\sf intersect}\,\{x : A\}\,B
\\
\Gamma \vdash P: A
\end{stack}}
\]

\[
\infer[{\tt intersectElim}]{\Gamma \vdash [P/x]B\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash {\sf intersect}\,\{x : A\}\,B\:{\sf ext}\:M
\\
\Gamma \vdash P: A
\end{stack}}
\]

\[
\infer[{\tt intersectFormInv1}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf intersect}\,\{x : A\}\,B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt intersectFormInv2}]{\Gamma \vdash [M/x]B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf intersect}\,\{x : A\}\,B: {\sf type}
\\
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt guardForm}]{\Gamma \vdash {\sf guard}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt guardEq}]{\Gamma \vdash {\sf guard}\,A\,B= {\sf guard}\,A'\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf iff}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt guardFormUniv}]{\Gamma \vdash {\sf guard}\,A\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt guardEqUniv}]{\Gamma \vdash {\sf guard}\,A\,B= {\sf guard}\,A'\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash A': {\Bbb U}_{I}
\\
\Gamma \vdash {\sf iff}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt guardIntroOf}]{\Gamma \vdash M: {\sf guard}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M: B
\end{stack}}
\]

\[
\infer[{\tt guardIntroEq}]{\Gamma \vdash M= N: {\sf guard}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash M= N: B
\end{stack}}
\]

\[
\infer[{\tt guardIntro}]{\Gamma \vdash {\sf guard}\,A\,B\:{\sf ext}\:[\star /x]M}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}[A]\vdash B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt guardElimOf}]{\Gamma \vdash M: B}{
\begin{stack}
\Gamma \vdash M: {\sf guard}\,A\,B
\\
\Gamma \vdash A
\end{stack}}
\]

\[
\infer[{\tt guardElimEq}]{\Gamma \vdash M= N: B}{
\begin{stack}
\Gamma \vdash M= N: {\sf guard}\,A\,B
\\
\Gamma \vdash A
\end{stack}}
\]

\[
\infer[{\tt guardElim}]{\Gamma \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash {\sf guard}\,A\,B\:{\sf ext}\:M
\\
\Gamma \vdash A
\end{stack}}
\]

\[
\infer[{\tt guardSatEq}]{\Gamma \vdash B= {\sf guard}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash A
\end{stack}}
\]

\[
\infer[{\tt guardSub}]{\Gamma \vdash {\sf subtype}\,({\sf guard}\,A\,B)\,({\sf guard}\,A'\,B')}{
\begin{stack}
\Gamma \vdash {\sf arrow}\,A'\,A
\\
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A'\vdash {\sf subtype}\,B\,B'
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt guardSubIntro}]{\Gamma \vdash {\sf subtype}\,C\,({\sf guard}\,A\,B)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,C\,B
\\
\Gamma \vdash C: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt guardSubElim}]{\Gamma \vdash {\sf subtype}\,({\sf guard}\,A\,B)\,C}{
\begin{stack}
\Gamma \vdash A
\\
\Gamma \vdash {\sf subtype}\,B\,C
\end{stack}}
\]

\[
\infer[{\tt coguardForm}]{\Gamma \vdash {\sf coguard}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt coguardEq}]{\Gamma \vdash {\sf coguard}\,A\,B= {\sf coguard}\,A'\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf iff}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt coguardFormUniv}]{\Gamma \vdash {\sf coguard}\,A\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt coguardEqUniv}]{\Gamma \vdash {\sf coguard}\,A\,B= {\sf coguard}\,A'\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash A': {\Bbb U}_{I}
\\
\Gamma \vdash {\sf iff}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt coguardIntroEq}]{\Gamma \vdash M= N: {\sf coguard}\,A\,B}{
\begin{stack}
\Gamma \vdash A
\\
\Gamma \vdash M= N: B
\end{stack}}
\]

\[
\infer[{\tt coguardIntroOf}]{\Gamma \vdash M: {\sf coguard}\,A\,B}{
\begin{stack}
\Gamma \vdash A
\\
\Gamma \vdash M: B
\end{stack}}
\]

\[
\infer[{\tt coguardIntroOfSquash}]{\Gamma \vdash M: {\sf coguard}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf squash}\,A
\\
\Gamma \vdash M: B
\end{stack}}
\]

\[
\infer[{\tt coguardIntro}]{\Gamma \vdash {\sf coguard}\,A\,B\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash A
\\
\Gamma \vdash B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt coguardElim1}]{\Gamma \vdash {\sf squash}\,A}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf coguard}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt coguardElim2Eq}]{\Gamma \vdash M= N: B}{
\begin{stack}
\Gamma \vdash M= N: {\sf coguard}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt coguardElim2Of}]{\Gamma \vdash M: B}{
\begin{stack}
\Gamma \vdash M: {\sf coguard}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt coguardElim2}]{\Gamma \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash {\sf coguard}\,A\,B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt coguardLeft}]{\Gamma_1 ,x\mathord{:}({\sf coguard}\,A\,B), \Gamma_2 \vdash C\:{\sf ext}\:[\star /y]M}{
\begin{stack}
\Gamma_1 \vdash A: {\sf type}
\\
\Gamma_1 ,x\mathord{:}B,y\mathord{:}[A], \Gamma_2\vdash C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt coguardSatEq}]{\Gamma \vdash B= {\sf coguard}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash A
\end{stack}}
\]

\[
\infer[{\tt coguardSub}]{\Gamma \vdash {\sf subtype}\,({\sf coguard}\,A\,B)\,({\sf coguard}\,A'\,B')}{
\begin{stack}
\Gamma \vdash {\sf arrow}\,A\,A'
\\
\Gamma \vdash A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\\
\Gamma ,x\mathord{:}A'\vdash B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt coguardSubIntro}]{\Gamma \vdash {\sf subtype}\,C\,({\sf coguard}\,A\,B)}{
\begin{stack}
\Gamma \vdash A
\\
\Gamma \vdash {\sf subtype}\,C\,B
\end{stack}}
\]

\[
\infer[{\tt coguardSubElim}]{\Gamma \vdash {\sf subtype}\,({\sf coguard}\,A\,B)\,C}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,C
\\
\Gamma \vdash C: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt existsForm}]{\Gamma \vdash {\sf exists}\,\{x : A\}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt existsEq}]{\Gamma \vdash {\sf exists}\,\{x : A\}\,B= {\sf exists}\,\{x : A'\}\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt existsFormUniv}]{\Gamma \vdash {\sf exists}\,\{x : A\}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt existsEqUniv}]{\Gamma \vdash {\sf exists}\,\{x : A\}\,B= {\sf exists}\,\{x : A'\}\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt existsSub}]{\Gamma \vdash {\sf subtype}\,({\sf exists}\,\{x : A\}\,B)\,({\sf exists}\,\{x : A'\}\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\\
\Gamma ,x\mathord{:}A'\vdash B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt existsIntroOf}]{\Gamma \vdash \langle M,N\rangle : {\sf exists}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash N: [M/x]B
\end{stack}}
\]

\[
\infer[{\tt existsIntroEq}]{\Gamma \vdash \langle M,N\rangle = \langle M',N'\rangle : {\sf exists}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M= M': A
\\
\Gamma \vdash N= N': [M/x]B
\end{stack}}
\]

\[
\infer[{\tt existsIntro}]{\Gamma \vdash {\sf exists}\,\{x : A\}\,B\:{\sf ext}\:\langle M,N\rangle }{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash [M/x]B\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt existsElim1Of}]{\Gamma \vdash M\, \pi_1: A}{
\begin{stack}
\Gamma \vdash M: {\sf exists}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt existsElim1Eq}]{\Gamma \vdash M\, \pi_1= N\, \pi_1: A}{
\begin{stack}
\Gamma \vdash M= N: {\sf exists}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt existsElim1}]{\Gamma \vdash A\:{\sf ext}\:M\, \pi_1}{
\begin{stack}
\Gamma \vdash {\sf exists}\,\{x : A\}\,B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt existsElim2Of}]{\Gamma \vdash M\, \pi_2: [M\, \pi_1/x]B}{
\begin{stack}
\Gamma \vdash M: {\sf exists}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt existsElim2Eq}]{\Gamma \vdash M\, \pi_2= N\, \pi_2: [M\, \pi_1/x]B}{
\begin{stack}
\Gamma \vdash M= N: {\sf exists}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt existsEta}]{\Gamma \vdash M= \langle M\, \pi_1,M\, \pi_2\rangle : {\sf exists}\,\{x : A\}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf exists}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt existsExt}]{\Gamma \vdash M= N: {\sf exists}\,\{x : A\}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf exists}\,\{x : A\}\,B
\\
\Gamma \vdash N: {\sf exists}\,\{x : A\}\,B
\\
\Gamma \vdash M\, \pi_1= N\, \pi_1: A
\\
\Gamma \vdash M\, \pi_2= N\, \pi_2: [M\, \pi_1/x]B
\end{stack}}
\]

\[
\infer[{\tt existsLeft}]{\Gamma_1 ,x\mathord{:}({\sf exists}\,\{y : A\}\,B), \Gamma_2 \vdash C\:{\sf ext}\:[x\, \pi_1, x\, \pi_2/y, z]M}{
\begin{stack}
\Gamma_1 ,y\mathord{:}A,z\mathord{:}B, [\langle y,z\rangle /x]\Gamma_2\vdash [\langle y,z\rangle /x]C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt existsFormInv1}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf exists}\,\{x : A\}\,B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt existsFormInv2}]{\Gamma \vdash [M/x]B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf exists}\,\{x : A\}\,B: {\sf type}
\\
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt existsFormInv2Eq}]{\Gamma \vdash [M/x]B= [N/x]B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf exists}\,\{x : A\}\,B: {\sf type}
\\
\Gamma \vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt prodKind}]{\Gamma \vdash {\sf prod}\,K\,L: {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma \vdash L: {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt prodKindEq}]{\Gamma \vdash {\sf prod}\,K\,L= {\sf prod}\,K'\,L': {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash K= K': {\Bbb K}_{I}
\\
\Gamma \vdash L= L': {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt prodForm}]{\Gamma \vdash {\sf prod}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt prodEq}]{\Gamma \vdash {\sf prod}\,A\,B= {\sf prod}\,A'\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma \vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt prodFormUniv}]{\Gamma \vdash {\sf prod}\,A\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt prodEqUniv}]{\Gamma \vdash {\sf prod}\,A\,B= {\sf prod}\,A'\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma \vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt prodExistsEq}]{\Gamma \vdash {\sf prod}\,A\,B= {\sf exists}\,\{x : A'\}\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma \vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt prodExistsEqUniv}]{\Gamma \vdash {\sf prod}\,A\,B= {\sf exists}\,\{x : A'\}\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma \vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt prodSub}]{\Gamma \vdash {\sf subtype}\,({\sf prod}\,A\,B)\,({\sf prod}\,A'\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma \vdash {\sf subtype}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt prodExistsSub}]{\Gamma \vdash {\sf subtype}\,({\sf prod}\,A\,B)\,({\sf exists}\,\{x : A'\}\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A'\vdash B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt existsProdSub}]{\Gamma \vdash {\sf subtype}\,({\sf exists}\,\{x : A\}\,B)\,({\sf prod}\,A'\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\\
\Gamma \vdash B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt prodIntroOf}]{\Gamma \vdash \langle M,N\rangle : {\sf prod}\,A\,B}{
\begin{stack}
\Gamma \vdash M: A
\\
\Gamma \vdash N: B
\end{stack}}
\]

\[
\infer[{\tt prodIntroEq}]{\Gamma \vdash \langle M,N\rangle = \langle M',N'\rangle : {\sf prod}\,A\,B}{
\begin{stack}
\Gamma \vdash M= M': A
\\
\Gamma \vdash N= N': B
\end{stack}}
\]

\[
\infer[{\tt prodIntro}]{\Gamma \vdash {\sf prod}\,A\,B\:{\sf ext}\:\langle M,N\rangle }{
\begin{stack}
\Gamma \vdash A\:{\sf ext}\:M
\\
\Gamma \vdash B\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt prodElim1Of}]{\Gamma \vdash M\, \pi_1: A}{
\begin{stack}
\Gamma \vdash M: {\sf prod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt prodElim1Eq}]{\Gamma \vdash M\, \pi_1= N\, \pi_1: A}{
\begin{stack}
\Gamma \vdash M= N: {\sf prod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt prodElim1}]{\Gamma \vdash A\:{\sf ext}\:M\, \pi_1}{
\begin{stack}
\Gamma \vdash {\sf prod}\,A\,B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt prodElim2Of}]{\Gamma \vdash M\, \pi_2: B}{
\begin{stack}
\Gamma \vdash M: {\sf prod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt prodElim2Eq}]{\Gamma \vdash M\, \pi_2= N\, \pi_2: B}{
\begin{stack}
\Gamma \vdash M= N: {\sf prod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt prodElim2}]{\Gamma \vdash B\:{\sf ext}\:M\, \pi_2}{
\begin{stack}
\Gamma \vdash {\sf prod}\,A\,B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt prodEta}]{\Gamma \vdash M= \langle M\, \pi_1,M\, \pi_2\rangle : {\sf prod}\,A\,B}{
\begin{stack}
\Gamma \vdash M: {\sf prod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt prodExt}]{\Gamma \vdash M= N: {\sf prod}\,A\,B}{
\begin{stack}
\Gamma \vdash M: {\sf prod}\,A\,B
\\
\Gamma \vdash N: {\sf prod}\,A\,B
\\
\Gamma \vdash M\, \pi_1= N\, \pi_1: A
\\
\Gamma \vdash M\, \pi_2= N\, \pi_2: B
\end{stack}}
\]

\[
\infer[{\tt prodLeft}]{\Gamma_1 ,x\mathord{:}({\sf prod}\,A\,B), \Gamma_2 \vdash C\:{\sf ext}\:[x\, \pi_1, x\, \pi_2/y, z]M}{
\begin{stack}
\Gamma_1 ,y\mathord{:}A,z\mathord{:}B, [\langle y,z\rangle /x]\Gamma_2\vdash [\langle y,z\rangle /x]C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt prodFormInv1}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf prod}\,A\,B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt prodFormInv2}]{\Gamma \vdash B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf prod}\,A\,B: {\sf type}
\\
\Gamma \vdash A
\end{stack}}
\]

\[
\infer[{\tt dprodForm}]{\Gamma \vdash {\sf dprod}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt dprodEq}]{\Gamma \vdash {\sf dprod}\,A\,B= {\sf dprod}\,A'\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt dprodFormUniv}]{\Gamma \vdash {\sf dprod}\,A\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt dprodEqUniv}]{\Gamma \vdash {\sf dprod}\,A\,B= {\sf dprod}\,A'\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt dprodExistsEq}]{\Gamma \vdash {\sf dprod}\,A\,B= {\sf exists}\,\{x : A'\}\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt dprodExistsEqUniv}]{\Gamma \vdash {\sf dprod}\,A\,B= {\sf exists}\,\{x : A'\}\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt prodDprodEq}]{\Gamma \vdash {\sf prod}\,A\,B= {\sf dprod}\,A'\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma \vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt prodDprodEqUniv}]{\Gamma \vdash {\sf prod}\,A\,B= {\sf dprod}\,A'\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma \vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt dprodSub}]{\Gamma \vdash {\sf subtype}\,({\sf dprod}\,A\,B)\,({\sf dprod}\,A'\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\\
\Gamma ,x\mathord{:}A'\vdash B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt dprodExistsSub}]{\Gamma \vdash {\sf subtype}\,({\sf dprod}\,A\,B)\,({\sf exists}\,\{x : A'\}\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\\
\Gamma ,x\mathord{:}A'\vdash B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt existsDprodSub}]{\Gamma \vdash {\sf subtype}\,({\sf exists}\,\{x : A\}\,B)\,({\sf dprod}\,A'\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\\
\Gamma ,x\mathord{:}A'\vdash B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt dprodProdSub}]{\Gamma \vdash {\sf subtype}\,({\sf dprod}\,A\,B)\,({\sf prod}\,A'\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\\
\Gamma \vdash B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt prodDprodSub}]{\Gamma \vdash {\sf subtype}\,({\sf prod}\,A\,B)\,({\sf dprod}\,A'\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A'\vdash B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt dprodIntroOf}]{\Gamma \vdash \langle M,N\rangle : {\sf dprod}\,A\,B}{
\begin{stack}
\Gamma \vdash M: A
\\
\Gamma \vdash N: B
\end{stack}}
\]

\[
\infer[{\tt dprodIntroEq}]{\Gamma \vdash \langle M,N\rangle = \langle M',N'\rangle : {\sf dprod}\,A\,B}{
\begin{stack}
\Gamma \vdash M= M': A
\\
\Gamma \vdash N= N': B
\end{stack}}
\]

\[
\infer[{\tt dprodIntro}]{\Gamma \vdash {\sf dprod}\,A\,B\:{\sf ext}\:\langle M,N\rangle }{
\begin{stack}
\Gamma \vdash A\:{\sf ext}\:M
\\
\Gamma \vdash B\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt dprodElim1Of}]{\Gamma \vdash M\, \pi_1: A}{
\begin{stack}
\Gamma \vdash M: {\sf dprod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt dprodElim1Eq}]{\Gamma \vdash M\, \pi_1= N\, \pi_1: A}{
\begin{stack}
\Gamma \vdash M= N: {\sf dprod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt dprodElim1}]{\Gamma \vdash A\:{\sf ext}\:M\, \pi_1}{
\begin{stack}
\Gamma \vdash {\sf dprod}\,A\,B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt dprodElim2Of}]{\Gamma \vdash M\, \pi_2: B}{
\begin{stack}
\Gamma \vdash M: {\sf dprod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt dprodElim2Eq}]{\Gamma \vdash M\, \pi_2= N\, \pi_2: B}{
\begin{stack}
\Gamma \vdash M= N: {\sf dprod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt dprodElim2}]{\Gamma \vdash B\:{\sf ext}\:M\, \pi_2}{
\begin{stack}
\Gamma \vdash {\sf dprod}\,A\,B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt dprodEta}]{\Gamma \vdash M= \langle M\, \pi_1,M\, \pi_2\rangle : {\sf dprod}\,A\,B}{
\begin{stack}
\Gamma \vdash M: {\sf dprod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt dprodExt}]{\Gamma \vdash M= N: {\sf dprod}\,A\,B}{
\begin{stack}
\Gamma \vdash M: {\sf dprod}\,A\,B
\\
\Gamma \vdash N: {\sf dprod}\,A\,B
\\
\Gamma \vdash M\, \pi_1= N\, \pi_1: A
\\
\Gamma \vdash M\, \pi_2= N\, \pi_2: B
\end{stack}}
\]

\[
\infer[{\tt dprodLeft}]{\Gamma_1 ,x\mathord{:}({\sf dprod}\,A\,B), \Gamma_2 \vdash C\:{\sf ext}\:[x\, \pi_1, x\, \pi_2/y, z]M}{
\begin{stack}
\Gamma_1 ,y\mathord{:}A,z\mathord{:}B, [\langle y,z\rangle /x]\Gamma_2\vdash [\langle y,z\rangle /x]C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt dprodFormInv1}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf dprod}\,A\,B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt dprodFormInv2}]{\Gamma \vdash B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf dprod}\,A\,B: {\sf type}
\\
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt unionForm}]{\Gamma \vdash {\sf union}\,\{x : A\}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt unionEq}]{\Gamma \vdash {\sf union}\,\{x : A\}\,B= {\sf union}\,\{x : A'\}\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt unionFormUniv}]{\Gamma \vdash {\sf union}\,\{x : A\}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt unionEqUniv}]{\Gamma \vdash {\sf union}\,\{x : A\}\,B= {\sf union}\,\{x : A'\}\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt unionSub}]{\Gamma \vdash {\sf subtype}\,({\sf union}\,\{x : A\}\,B)\,({\sf union}\,\{x : A'\}\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\\
\Gamma ,x\mathord{:}A'\vdash B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt unionIntroOf}]{\Gamma \vdash N: {\sf union}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash N: [M/x]B
\end{stack}}
\]

\[
\infer[{\tt unionIntroEq}]{\Gamma \vdash N= N': {\sf union}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash N= N': [M/x]B
\end{stack}}
\]

\[
\infer[{\tt unionIntro}]{\Gamma \vdash {\sf union}\,\{x : A\}\,B\:{\sf ext}\:N}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash [M/x]B\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt unionElimOf}]{\Gamma \vdash [M/y]P: C}{
\begin{stack}
\Gamma ,x\mathord{:}A,y\mathord{:}B\vdash P: C
\\
\Gamma \vdash M: {\sf union}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt unionElimEq}]{\Gamma \vdash [M/y]P= [N/y]Q: C}{
\begin{stack}
\Gamma ,x\mathord{:}A,y\mathord{:}B\vdash P= Q: C
\\
\Gamma \vdash M= N: {\sf union}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt unionElim}]{\Gamma \vdash C\:{\sf ext}\:[\star , M/x, y]P}{
\begin{stack}
\Gamma ,x\mathord{:}[A],y\mathord{:}B\vdash C\:{\sf ext}\:P
\\
\Gamma \vdash M: {\sf union}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt unionElimOfDep}]{\Gamma \vdash [M/y]P: [M/y]C}{
\begin{stack}
\Gamma ,x\mathord{:}A,y\mathord{:}B\vdash P: C
\\
\Gamma \vdash M: {\sf union}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt unionElimEqDep}]{\Gamma \vdash [M/y]P= [N/y]Q: [M/y]C}{
\begin{stack}
\Gamma ,x\mathord{:}A,y\mathord{:}B\vdash P= Q: C
\\
\Gamma \vdash M= N: {\sf union}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt unionElimDep}]{\Gamma \vdash [M/y]C\:{\sf ext}\:[\star , M/x, y]P}{
\begin{stack}
\Gamma ,x\mathord{:}[A],y\mathord{:}B\vdash C\:{\sf ext}\:P
\\
\Gamma \vdash M: {\sf union}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt unionElimIstype}]{\Gamma \vdash [M/y]C: {\sf type}}{
\begin{stack}
\Gamma ,x\mathord{:}A,y\mathord{:}B\vdash C: {\sf type}
\\
\Gamma \vdash M: {\sf union}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt unionElimEqtype}]{\Gamma \vdash [M/y]C= [N/y]D: {\sf type}}{
\begin{stack}
\Gamma ,x\mathord{:}A,y\mathord{:}B\vdash C= D: {\sf type}
\\
\Gamma \vdash M= N: {\sf union}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt sumForm}]{\Gamma \vdash {\sf sum}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt sumEq}]{\Gamma \vdash {\sf sum}\,A\,B= {\sf sum}\,A'\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma \vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt sumFormUniv}]{\Gamma \vdash {\sf sum}\,A\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt sumEqUniv}]{\Gamma \vdash {\sf sum}\,A\,B= {\sf sum}\,A'\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma \vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt sumSub}]{\Gamma \vdash {\sf subtype}\,({\sf sum}\,A\,B)\,({\sf sum}\,A'\,B')}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma \vdash {\sf subtype}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt sumIntro1Of}]{\Gamma \vdash {\sf inl}\,M: {\sf sum}\,A\,B}{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt sumIntro1Eq}]{\Gamma \vdash {\sf inl}\,M= {\sf inl}\,N: {\sf sum}\,A\,B}{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt sumIntro1}]{\Gamma \vdash {\sf sum}\,A\,B\:{\sf ext}\:{\sf inl}\,M}{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash A\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt sumIntro2Of}]{\Gamma \vdash {\sf inr}\,M: {\sf sum}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash M: B
\end{stack}}
\]

\[
\infer[{\tt sumIntro2Eq}]{\Gamma \vdash {\sf inr}\,M= {\sf inr}\,N: {\sf sum}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash M= N: B
\end{stack}}
\]

\[
\infer[{\tt sumIntro2}]{\Gamma \vdash {\sf sum}\,A\,B\:{\sf ext}\:{\sf inr}\,M}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt sumElimOf}]{\Gamma \vdash {\sf sum_case}\,M\,(\lambda x.\,P)\,(\lambda x.\,R): [M/y]C}{
\begin{stack}
\Gamma \vdash M: {\sf sum}\,A\,B
\\
\Gamma ,x\mathord{:}A\vdash P: [{\sf inl}\,x/y]C
\\
\Gamma ,x\mathord{:}B\vdash R: [{\sf inr}\,x/y]C
\end{stack}}
\]

\[
\infer[{\tt sumElimOfNondep}]{\Gamma \vdash {\sf sum_case}\,M\,(\lambda x.\,P)\,(\lambda x.\,R): C}{
\begin{stack}
\Gamma \vdash M: {\sf sum}\,A\,B
\\
\Gamma ,x\mathord{:}A\vdash P: C
\\
\Gamma ,x\mathord{:}B\vdash R: C
\end{stack}}
\]

\[
\infer[{\tt sumElimEq}]{\Gamma \vdash {\sf sum_case}\,M\,(\lambda x.\,P)\,(\lambda x.\,R)= {\sf sum_case}\,N\,(\lambda x.\,Q)\,(\lambda x.\,S): [M/y]C}{
\begin{stack}
\Gamma \vdash M= N: {\sf sum}\,A\,B
\\
\Gamma ,x\mathord{:}A\vdash P= Q: [{\sf inl}\,x/y]C
\\
\Gamma ,x\mathord{:}B\vdash R= S: [{\sf inr}\,x/y]C
\end{stack}}
\]

\[
\infer[{\tt sumElim}]{\Gamma \vdash [M/y]C\:{\sf ext}\:{\sf sum_case}\,M\,(\lambda x.\,P)\,(\lambda x.\,R)}{
\begin{stack}
\Gamma \vdash M: {\sf sum}\,A\,B
\\
\Gamma ,x\mathord{:}A\vdash [{\sf inl}\,x/y]C\:{\sf ext}\:P
\\
\Gamma ,x\mathord{:}B\vdash [{\sf inr}\,x/y]C\:{\sf ext}\:R
\end{stack}}
\]

\[
\infer[{\tt sumElimNondep}]{\Gamma \vdash C\:{\sf ext}\:{\sf sum_case}\,M\,(\lambda x.\,P)\,(\lambda x.\,R)}{
\begin{stack}
\Gamma \vdash {\sf sum}\,A\,B\:{\sf ext}\:M
\\
\Gamma ,x\mathord{:}A\vdash C\:{\sf ext}\:P
\\
\Gamma ,x\mathord{:}B\vdash C\:{\sf ext}\:R
\end{stack}}
\]

\[
\infer[{\tt sumElimIstype}]{\Gamma \vdash {\sf sum_case}\,M\,(\lambda x.\,C)\,(\lambda x.\,E): {\sf type}}{
\begin{stack}
\Gamma \vdash M: {\sf sum}\,A\,B
\\
\Gamma ,x\mathord{:}A\vdash C: {\sf type}
\\
\Gamma ,x\mathord{:}B\vdash E: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt sumElimEqtype}]{\Gamma \vdash {\sf sum_case}\,M\,(\lambda x.\,C)\,(\lambda x.\,E)= {\sf sum_case}\,N\,(\lambda x.\,D)\,(\lambda x.\,F): {\sf type}}{
\begin{stack}
\Gamma \vdash M= N: {\sf sum}\,A\,B
\\
\Gamma ,x\mathord{:}A\vdash C= D: {\sf type}
\\
\Gamma ,x\mathord{:}B\vdash E= F: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt sumContradiction}]{\Gamma \vdash C}{
\begin{stack}
\Gamma \vdash {\sf inl}\,M= {\sf inr}\,N: {\sf sum}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt sumInjection1}]{\Gamma \vdash M= N: A}{
\begin{stack}
\Gamma \vdash {\sf inl}\,M= {\sf inl}\,N: {\sf sum}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt sumInjection2}]{\Gamma \vdash M= N: B}{
\begin{stack}
\Gamma \vdash {\sf inr}\,M= {\sf inr}\,N: {\sf sum}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt sum_caseType}]{\Gamma \vdash {\sf sum_case}: {\sf intersect}\,\{i : {\sf level}\}\,({\sf intersect}\,\{a : {\Bbb U}_{i}\}\,({\sf intersect}\,\{b : {\Bbb U}_{i}\}\,({\sf intersect}\,\{c : {\Bbb U}_{i}\}\,({\sf arrow}\,({\sf sum}\,a\,b)\,({\sf arrow}\,({\sf arrow}\,a\,c)\,({\sf arrow}\,({\sf arrow}\,b\,c)\,c))))))}{}
\]

\[
\infer[{\tt sumFormInv1}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf sum}\,A\,B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt sumFormInv2}]{\Gamma \vdash B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf sum}\,A\,B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt futureKind}]{\Gamma \vdash {\sf future}\,K: {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\overline{\Gamma}\vdash K: {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt futureKindEq}]{\Gamma \vdash {\sf future}\,K= {\sf future}\,L: {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\overline{\Gamma}\vdash K= L: {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt futureForm}]{\Gamma \vdash {\sf future}\,A: {\sf type}}{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt futureEq}]{\Gamma \vdash {\sf future}\,A= {\sf future}\,B: {\sf type}}{
\begin{stack}
\overline{\Gamma}\vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt futureFormUniv}]{\Gamma \vdash {\sf future}\,A: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\overline{\Gamma}\vdash A: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt futureEqUniv}]{\Gamma \vdash {\sf future}\,A= {\sf future}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\overline{\Gamma}\vdash A= B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt futureSub}]{\Gamma \vdash {\sf subtype}\,({\sf future}\,A)\,({\sf future}\,B)}{
\begin{stack}
\overline{\Gamma}\vdash {\sf subtype}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt futureIntroOf}]{\Gamma \vdash {\sf next}\,M: {\sf future}\,A}{
\begin{stack}
\overline{\Gamma}\vdash M: A
\end{stack}}
\]

\[
\infer[{\tt futureIntroEq}]{\Gamma \vdash {\sf next}\,M= {\sf next}\,N: {\sf future}\,A}{
\begin{stack}
\overline{\Gamma}\vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt futureIntro}]{\Gamma \vdash {\sf future}\,A\:{\sf ext}\:{\sf next}\,M}{
\begin{stack}
\overline{\Gamma}\vdash A\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt futureElimOf}]{\Gamma \vdash [M\, {\sf prev}/x]P: [M\, {\sf prev}/x]B}{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf future}\,A
\\
\Gamma ,x\mathord{:}\underline{A}\vdash P: B
\end{stack}}
\]

\[
\infer[{\tt futureElimOfLetnext}]{\Gamma \vdash {\sf letnext}\,\{x : M\}\,P: [M\, {\sf prev}/x]B}{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf future}\,A
\\
\Gamma ,x\mathord{:}\underline{A}\vdash P: B
\end{stack}}
\]

\[
\infer[{\tt futureElimOfLetnextNondep}]{\Gamma \vdash {\sf letnext}\,\{x : M\}\,P: B}{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf future}\,A
\\
\Gamma ,x\mathord{:}\underline{A}\vdash P: B
\end{stack}}
\]

\[
\infer[{\tt futureElimEq}]{\Gamma \vdash [M\, {\sf prev}/x]P= [N\, {\sf prev}/x]Q: [M\, {\sf prev}/x]B}{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\\
\Gamma \vdash M= N: {\sf future}\,A
\\
\Gamma ,x\mathord{:}\underline{A}\vdash P= Q: B
\end{stack}}
\]

\[
\infer[{\tt futureElim}]{\Gamma \vdash [M\, {\sf prev}/x]B\:{\sf ext}\:[M\, {\sf prev}/x]P}{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf future}\,A
\\
\Gamma ,x\mathord{:}\underline{A}\vdash B\:{\sf ext}\:P
\end{stack}}
\]

\[
\infer[{\tt futureElimIstype}]{\Gamma \vdash [M\, {\sf prev}/x]B: {\sf type}}{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf future}\,A
\\
\Gamma ,x\mathord{:}\underline{A}\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt futureElimIstypeLetnext}]{\Gamma \vdash {\sf letnext}\,\{x : M\}\,B: {\sf type}}{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf future}\,A
\\
\Gamma ,x\mathord{:}\underline{A}\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt futureElimEqtype}]{\Gamma \vdash [M\, {\sf prev}/x]B= [N\, {\sf prev}/x]C: {\sf type}}{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\\
\Gamma \vdash M= N: {\sf future}\,A
\\
\Gamma ,x\mathord{:}\underline{A}\vdash B= C: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt futureEta}]{\Gamma \vdash M= {\sf next}\,(M\, {\sf prev}): {\sf future}\,A}{
\begin{stack}
\Gamma \vdash M: {\sf future}\,A
\end{stack}}
\]

\[
\infer[{\tt futureExt}]{\Gamma \vdash M= N: {\sf future}\,A}{
\begin{stack}
\Gamma \vdash M: {\sf future}\,A
\\
\Gamma \vdash N: {\sf future}\,A
\\
\overline{\Gamma}\vdash M\, {\sf prev}= N\, {\sf prev}: A
\end{stack}}
\]

\[
\infer[{\tt futureLeft}]{\Gamma_1 ,x\mathord{:}({\sf future}\,A), \Gamma_2 \vdash B\:{\sf ext}\:[x\, {\sf prev}/y]M}{
\begin{stack}
\overline{\Gamma_1}\vdash A: {\sf type}
\\
\Gamma_1 ,y\mathord{:}\underline{A}, [{\sf next}\,y/x]\Gamma_2\vdash [{\sf next}\,y/x]B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt futureInjection}]{\Gamma \vdash {\sf future}\,(M= N: A)\:{\sf ext}\:{\sf next}\,\star }{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\\
\Gamma \vdash {\sf next}\,M= {\sf next}\,N: {\sf future}\,A
\end{stack}}
\]

\[
\infer[{\tt recKind}]{\Gamma \vdash {\sf rec}\,(\lambda x.\,K): {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,x\mathord{:}\underline{{\Bbb K}_{I}}\vdash K: {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt recKindEq}]{\Gamma \vdash {\sf rec}\,(\lambda x.\,K)= {\sf rec}\,(\lambda x.\,L): {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,x\mathord{:}\underline{{\Bbb K}_{I}}\vdash K= L: {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt recForm}]{\Gamma \vdash {\sf rec}\,(\lambda x.\,A): {\sf type}}{
\begin{stack}
\Gamma ,x\mathord{:}\underline{\sf type}\vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt recEq}]{\Gamma \vdash {\sf rec}\,(\lambda x.\,A)= {\sf rec}\,(\lambda x.\,B): {\sf type}}{
\begin{stack}
\Gamma ,x\mathord{:}\underline{\sf type}\vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt recFormUniv}]{\Gamma \vdash {\sf rec}\,(\lambda x.\,A): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,x\mathord{:}\underline{{\Bbb U}_{I}}\vdash A: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt recEqUniv}]{\Gamma \vdash {\sf rec}\,(\lambda x.\,A)= {\sf rec}\,(\lambda x.\,B): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,x\mathord{:}\underline{{\Bbb U}_{I}}\vdash A= B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt recUnroll}]{\Gamma \vdash {\sf rec}\,(\lambda x.\,A)= [{\sf rec}\,(\lambda x.\,A)/x]A: {\sf type}}{
\begin{stack}
\Gamma ,x\mathord{:}\underline{\sf type}\vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt recUnrollUniv}]{\Gamma \vdash {\sf rec}\,(\lambda x.\,A)= [{\sf rec}\,(\lambda x.\,A)/x]A: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,x\mathord{:}\underline{{\Bbb U}_{I}}\vdash A: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt recBisimilar}]{\Gamma \vdash B= {\sf rec}\,(\lambda x.\,A): {\sf type}}{
\begin{stack}
\Gamma ,x\mathord{:}\underline{\sf type}\vdash A: {\sf type}
\\
\Gamma \vdash B= [B/x]A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt muForm}]{\Gamma \vdash {\sf mu}\,(\lambda t.\,A): {\sf type}}{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash A: {\sf type}
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,A)
\end{stack}}
\]

\[
\infer[{\tt muEq}]{\Gamma \vdash {\sf mu}\,(\lambda t.\,A)= {\sf mu}\,(\lambda t.\,B): {\sf type}}{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash A= B: {\sf type}
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,A)
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,B)
\end{stack}}
\]

\[
\infer[{\tt muFormUniv}]{\Gamma \vdash {\sf mu}\,(\lambda t.\,A): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,t\mathord{:}{\Bbb U}_{I}\vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,A)
\end{stack}}
\]

\[
\infer[{\tt muEqUniv}]{\Gamma \vdash {\sf mu}\,(\lambda t.\,A)= {\sf mu}\,(\lambda t.\,B): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,t\mathord{:}{\Bbb U}_{I}\vdash A= B: {\Bbb U}_{I}
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,A)
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,B)
\end{stack}}
\]

\[
\infer[{\tt muUnroll}]{\Gamma \vdash {\sf eeqtp}\,({\sf mu}\,(\lambda t.\,A))\,[{\sf mu}\,(\lambda t.\,A)/t]A\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash A: {\sf type}
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,A)
\end{stack}}
\]

\[
\infer[{\tt muUnrollUniv}]{\Gamma \vdash {\sf eeqtp}\,({\sf mu}\,(\lambda t.\,A))\,[{\sf mu}\,(\lambda t.\,A)/t]A\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,t\mathord{:}{\Bbb U}_{I}\vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,A)
\end{stack}}
\]

\[
\infer[{\tt muInd}]{\Gamma \vdash [M/w]B\:{\sf ext}\:{\sf fix}\,(\lambda z.\,\lambda x.\,[\star , \star /y, t']N)\,M}{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash A: {\sf type}
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,A)
\\
\Gamma ,t'\mathord{:}[{\sf type}],x\mathord{:}[t'/t]A,y\mathord{:}({\sf subtype}\,t'\,({\sf mu}\,(\lambda t''.\,[t''/t]A))),z\mathord{:}({\sf forall}\,\{w : t'\}\,B)\vdash [x/w]B\:{\sf ext}\:N
\\
\Gamma \vdash M: {\sf mu}\,(\lambda t.\,A)
\end{stack}}
\]

\[
\infer[{\tt muIndUniv}]{\Gamma \vdash [M/w]B\:{\sf ext}\:{\sf fix}\,(\lambda z.\,\lambda x.\,[\star , \star /y, t']N\, \pi_1)\,M}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,t\mathord{:}{\Bbb U}_{I}\vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,A)
\\
\Gamma ,t'\mathord{:}[{\Bbb U}_{I}],x\mathord{:}[t'/t]A,y\mathord{:}({\sf subtype}\,t'\,({\sf mu}\,(\lambda t''.\,[t''/t]A))),z\mathord{:}({\sf forall}\,\{w : t'\}\,B)\vdash {\sf prod}\,[x/w]B\,([x/w]B: {\Bbb U}_{I})\:{\sf ext}\:N
\\
\Gamma \vdash M: {\sf mu}\,(\lambda t.\,A)
\end{stack}}
\]

\[
\infer[{\tt voidForm}]{\Gamma \vdash {\sf void}: {\sf type}}{}
\]

\[
\infer[{\tt voidEq}]{\Gamma \vdash {\sf void}= {\sf void}: {\sf type}}{}
\]

\[
\infer[{\tt voidFormUniv}]{\Gamma \vdash {\sf void}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt voidEqUniv}]{\Gamma \vdash {\sf void}= {\sf void}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt voidElim}]{\Gamma \vdash A}{
\begin{stack}
\Gamma \vdash {\sf void}
\end{stack}}
\]

\[
\infer[{\tt voidSub}]{\Gamma \vdash {\sf subtype}\,{\sf void}\,A}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt abortType}]{\Gamma \vdash {\sf abort}: {\sf intersect}\,\{i : {\sf level}\}\,({\sf intersect}\,\{a : {\Bbb U}_{i}\}\,({\sf arrow}\,{\sf void}\,a))}{}
\]

\[
\infer[{\tt unitKind}]{\Gamma \vdash {\sf unit}: {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt unitKindEq}]{\Gamma \vdash {\sf unit}= {\sf unit}: {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt unitForm}]{\Gamma \vdash {\sf unit}: {\sf type}}{}
\]

\[
\infer[{\tt unitEq}]{\Gamma \vdash {\sf unit}= {\sf unit}: {\sf type}}{}
\]

\[
\infer[{\tt unitFormUniv}]{\Gamma \vdash {\sf unit}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt unitEqUniv}]{\Gamma \vdash {\sf unit}= {\sf unit}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt unitIntroOf}]{\Gamma \vdash \star : {\sf unit}}{}
\]

\[
\infer[{\tt unitIntro}]{\Gamma \vdash {\sf unit}}{}
\]

\[
\infer[{\tt unitExt}]{\Gamma \vdash M= N: {\sf unit}}{
\begin{stack}
\Gamma \vdash M: {\sf unit}
\\
\Gamma \vdash N: {\sf unit}
\end{stack}}
\]

\[
\infer[{\tt unitLeft}]{\Gamma_1 ,x\mathord{:}{\sf unit}, \Gamma_2 \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 , [\star /x]\Gamma_2\vdash [\star /x]B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt boolForm}]{\Gamma \vdash {\sf bool}: {\sf type}}{}
\]

\[
\infer[{\tt boolEq}]{\Gamma \vdash {\sf bool}= {\sf bool}: {\sf type}}{}
\]

\[
\infer[{\tt boolFormUniv}]{\Gamma \vdash {\sf bool}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt boolEqUniv}]{\Gamma \vdash {\sf bool}= {\sf bool}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt boolIntro1Of}]{\Gamma \vdash {\sf true}: {\sf bool}}{}
\]

\[
\infer[{\tt boolIntro2Of}]{\Gamma \vdash {\sf false}: {\sf bool}}{}
\]

\[
\infer[{\tt boolElimOf}]{\Gamma \vdash {\sf ite}\,M\,P\,R: [M/x]A}{
\begin{stack}
\Gamma \vdash M: {\sf bool}
\\
\Gamma \vdash P: [{\sf true}/x]A
\\
\Gamma \vdash R: [{\sf false}/x]A
\end{stack}}
\]

\[
\infer[{\tt boolElimOfNondep}]{\Gamma \vdash {\sf ite}\,M\,P\,R: A}{
\begin{stack}
\Gamma \vdash M: {\sf bool}
\\
\Gamma \vdash P: A
\\
\Gamma \vdash R: A
\end{stack}}
\]

\[
\infer[{\tt boolElimEq}]{\Gamma \vdash {\sf ite}\,M\,P\,R= {\sf ite}\,N\,Q\,S: [M/x]A}{
\begin{stack}
\Gamma \vdash M= N: {\sf bool}
\\
\Gamma \vdash P= Q: [{\sf true}/x]A
\\
\Gamma \vdash R= S: [{\sf false}/x]A
\end{stack}}
\]

\[
\infer[{\tt boolElim}]{\Gamma \vdash [M/x]A\:{\sf ext}\:{\sf ite}\,M\,P\,R}{
\begin{stack}
\Gamma \vdash M: {\sf bool}
\\
\Gamma \vdash [{\sf true}/x]A\:{\sf ext}\:P
\\
\Gamma \vdash [{\sf false}/x]A\:{\sf ext}\:R
\end{stack}}
\]

\[
\infer[{\tt boolElimIstype}]{\Gamma \vdash {\sf ite}\,M\,A\,C: {\sf type}}{
\begin{stack}
\Gamma \vdash M: {\sf bool}
\\
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash C: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt boolElimEqtype}]{\Gamma \vdash {\sf ite}\,M\,A\,C= {\sf ite}\,N\,B\,D: {\sf type}}{
\begin{stack}
\Gamma \vdash M= N: {\sf bool}
\\
\Gamma \vdash A= B: {\sf type}
\\
\Gamma \vdash C= D: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt boolLeft}]{\Gamma_1 ,x\mathord{:}{\sf bool}, \Gamma_2 \vdash A\:{\sf ext}\:{\sf ite}\,x\,M\,N}{
\begin{stack}
\Gamma_1 , [{\sf true}/x]\Gamma_2\vdash [{\sf true}/x]A\:{\sf ext}\:M
\\
\Gamma_1 , [{\sf false}/x]\Gamma_2\vdash [{\sf false}/x]A\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt boolContradiction}]{\Gamma \vdash A}{
\begin{stack}
\Gamma \vdash {\sf true}= {\sf false}: {\sf bool}
\end{stack}}
\]

\[
\infer[{\tt iteType}]{\Gamma \vdash {\sf ite}: {\sf intersect}\,\{i : {\sf level}\}\,({\sf intersect}\,\{a : {\Bbb U}_{i}\}\,({\sf arrow}\,{\sf bool}\,({\sf arrow}\,a\,({\sf arrow}\,a\,a))))}{}
\]

\[
\infer[{\tt natForm}]{\Gamma \vdash {\sf nat}: {\sf type}}{}
\]

\[
\infer[{\tt natEq}]{\Gamma \vdash {\sf nat}= {\sf nat}: {\sf type}}{}
\]

\[
\infer[{\tt natFormUniv}]{\Gamma \vdash {\sf nat}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt natEqUniv}]{\Gamma \vdash {\sf nat}= {\sf nat}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt natElimEq}]{\Gamma \vdash {\sf nat_case}\,M\,P\,(\lambda x.\,R)= {\sf nat_case}\,N\,Q\,(\lambda x.\,S): [M/y]A}{
\begin{stack}
\Gamma \vdash M= N: {\sf nat}
\\
\Gamma \vdash P= Q: [{\sf zero}/y]A
\\
\Gamma ,x\mathord{:}{\sf nat}\vdash R= S: [{\sf succ}\,x/y]A
\end{stack}}
\]

\[
\infer[{\tt natElimEqtype}]{\Gamma \vdash {\sf nat_case}\,M\,A\,(\lambda x.\,C)= {\sf nat_case}\,N\,B\,(\lambda x.\,D): {\sf type}}{
\begin{stack}
\Gamma \vdash M= N: {\sf nat}
\\
\Gamma \vdash A= B: {\sf type}
\\
\Gamma ,x\mathord{:}{\sf nat}\vdash C= D: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt natUnroll}]{\Gamma \vdash {\sf eeqtp}\,{\sf nat}\,({\sf sum}\,{\sf unit}\,{\sf nat})\:{\sf ext}\:\langle \star ,\star \rangle }{}
\]

\[
\infer[{\tt natContradiction}]{\Gamma \vdash A}{
\begin{stack}
\Gamma \vdash {\sf zero}= {\sf succ}\,M: {\sf nat}
\end{stack}}
\]

\[
\infer[{\tt natInjection}]{\Gamma \vdash M= N: {\sf nat}}{
\begin{stack}
\Gamma \vdash {\sf succ}\,M= {\sf succ}\,N: {\sf nat}
\end{stack}}
\]

\[
\infer[{\tt zeroType}]{\Gamma \vdash {\sf zero}: {\sf nat}}{}
\]

\[
\infer[{\tt succType}]{\Gamma \vdash {\sf succ}: {\sf arrow}\,{\sf nat}\,{\sf nat}}{}
\]

\[
\infer[{\tt univKind}]{\Gamma \vdash {\Bbb U}_{J}: {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash J= I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt univKindEq}]{\Gamma \vdash {\Bbb U}_{J}= {\Bbb U}_{K}: {\Bbb K}_{I}}{
\begin{stack}
\Gamma \vdash J= K: {\sf level}
\\
\Gamma \vdash J= I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt univForm}]{\Gamma \vdash {\Bbb U}_{I}: {\sf type}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt univEq}]{\Gamma \vdash {\Bbb U}_{I}= {\Bbb U}_{J}: {\sf type}}{
\begin{stack}
\Gamma \vdash I= J: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt univFormUniv}]{\Gamma \vdash {\Bbb U}_{J}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash {\sf lleq}\,({\sf lsucc}\,J)\,I
\end{stack}}
\]

\[
\infer[{\tt univFormUnivSucc}]{\Gamma \vdash {\Bbb U}_{I}: {\Bbb U}_{{\sf lsucc}\,I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt univEqUniv}]{\Gamma \vdash {\Bbb U}_{J}= {\Bbb U}_{K}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash J= K: {\sf level}
\\
\Gamma \vdash {\sf lleq}\,({\sf lsucc}\,J)\,I
\end{stack}}
\]

\[
\infer[{\tt univCumulativeOf}]{\Gamma \vdash A: {\Bbb U}_{J}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash {\sf lleq}\,I\,J
\end{stack}}
\]

\[
\infer[{\tt univCumulativeEq}]{\Gamma \vdash A= B: {\Bbb U}_{J}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb U}_{I}
\\
\Gamma \vdash {\sf lleq}\,I\,J
\end{stack}}
\]

\[
\infer[{\tt univCumulativeSuccOf}]{\Gamma \vdash A: {\Bbb U}_{{\sf lsucc}\,I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt univSub}]{\Gamma \vdash {\sf subtype}\,{\Bbb U}_{I}\,{\Bbb U}_{J}}{
\begin{stack}
\Gamma \vdash {\sf lleq}\,I\,J
\end{stack}}
\]

\[
\infer[{\tt univForgetOf}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt univForgetEq}]{\Gamma \vdash A= B: {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt univIntroEqtype}]{\Gamma \vdash A= B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\\
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt univFormInv}]{\Gamma \vdash I: {\sf level}}{
\begin{stack}
\Gamma \vdash {\Bbb U}_{I}: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt kindForm}]{\Gamma \vdash {\Bbb K}_{I}: {\sf type}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt kindEq}]{\Gamma \vdash {\Bbb K}_{I}= {\Bbb K}_{J}: {\sf type}}{
\begin{stack}
\Gamma \vdash I= J: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt kindFormUniv}]{\Gamma \vdash {\Bbb K}_{I}: {\Bbb U}_{K}}{
\begin{stack}
\Gamma \vdash {\sf lleq}\,({\sf lsucc}\,({\sf lsucc}\,I))\,K
\end{stack}}
\]

\[
\infer[{\tt kindEqUniv}]{\Gamma \vdash {\Bbb K}_{I}= {\Bbb K}_{J}: {\Bbb U}_{K}}{
\begin{stack}
\Gamma \vdash I= J: {\sf level}
\\
\Gamma \vdash {\sf lleq}\,({\sf lsucc}\,({\sf lsucc}\,I))\,K
\end{stack}}
\]

\[
\infer[{\tt kindForgetOf}]{\Gamma \vdash A: {\Bbb U}_{{\sf lsucc}\,I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt kindForgetEq}]{\Gamma \vdash A= B: {\Bbb U}_{{\sf lsucc}\,I}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb K}_{I}
\end{stack}}
\]

\[
\infer[{\tt kindUnivSub}]{\Gamma \vdash {\sf subtype}\,{\Bbb K}_{I}\,{\Bbb U}_{J}}{
\begin{stack}
\Gamma \vdash {\sf lleq}\,({\sf lsucc}\,I)\,J
\end{stack}}
\]

\[
\infer[{\tt levelForm}]{\Gamma \vdash {\sf level}: {\sf type}}{}
\]

\[
\infer[{\tt levelEq}]{\Gamma \vdash {\sf level}= {\sf level}: {\sf type}}{}
\]

\[
\infer[{\tt levelFormUniv}]{\Gamma \vdash {\sf level}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt levelEqUniv}]{\Gamma \vdash {\sf level}= {\sf level}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lleqForm}]{\Gamma \vdash {\sf lleq}\,I\,J: {\sf type}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma \vdash J: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lleqEq}]{\Gamma \vdash {\sf lleq}\,I\,J= {\sf lleq}\,I'\,J': {\sf type}}{
\begin{stack}
\Gamma \vdash I= I': {\sf level}
\\
\Gamma \vdash J= J': {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lleqFormUniv}]{\Gamma \vdash {\sf lleq}\,I\,J: {\Bbb U}_{K}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma \vdash J: {\sf level}
\\
\Gamma \vdash K: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lleqEqUniv}]{\Gamma \vdash {\sf lleq}\,I\,J= {\sf lleq}\,I'\,J': {\Bbb U}_{K}}{
\begin{stack}
\Gamma \vdash I= I': {\sf level}
\\
\Gamma \vdash J= J': {\sf level}
\\
\Gamma \vdash K: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lzeroLevel}]{\Gamma \vdash {\sf lzero}: {\sf level}}{}
\]

\[
\infer[{\tt lsuccLevel}]{\Gamma \vdash {\sf lsucc}\,M: {\sf level}}{
\begin{stack}
\Gamma \vdash M: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lsuccEq}]{\Gamma \vdash {\sf lsucc}\,M= {\sf lsucc}\,N: {\sf level}}{
\begin{stack}
\Gamma \vdash M= N: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lmaxLevel}]{\Gamma \vdash {\sf lmax}\,M\,N: {\sf level}}{
\begin{stack}
\Gamma \vdash M: {\sf level}
\\
\Gamma \vdash N: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lmaxEq}]{\Gamma \vdash {\sf lmax}\,M\,N= {\sf lmax}\,M'\,N': {\sf level}}{
\begin{stack}
\Gamma \vdash M= M': {\sf level}
\\
\Gamma \vdash N= N': {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lleqRefl}]{\Gamma \vdash {\sf lleq}\,M\,M}{
\begin{stack}
\Gamma \vdash M: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lleqTrans}]{\Gamma \vdash {\sf lleq}\,M\,P}{
\begin{stack}
\Gamma \vdash {\sf lleq}\,M\,N
\\
\Gamma \vdash {\sf lleq}\,N\,P
\end{stack}}
\]

\[
\infer[{\tt lleqZero}]{\Gamma \vdash {\sf lleq}\,{\sf lzero}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lleqSucc}]{\Gamma \vdash {\sf lleq}\,({\sf lsucc}\,M)\,({\sf lsucc}\,N)}{
\begin{stack}
\Gamma \vdash {\sf lleq}\,M\,N
\end{stack}}
\]

\[
\infer[{\tt lleqIncrease}]{\Gamma \vdash {\sf lleq}\,M\,({\sf lsucc}\,N)}{
\begin{stack}
\Gamma \vdash {\sf lleq}\,M\,N
\end{stack}}
\]

\[
\infer[{\tt lleqMaxL}]{\Gamma \vdash {\sf lleq}\,({\sf lmax}\,M\,N)\,P}{
\begin{stack}
\Gamma \vdash {\sf lleq}\,M\,P
\\
\Gamma \vdash {\sf lleq}\,N\,P
\end{stack}}
\]

\[
\infer[{\tt lleqMaxR1}]{\Gamma \vdash {\sf lleq}\,M\,({\sf lmax}\,N\,P)}{
\begin{stack}
\Gamma \vdash {\sf lleq}\,M\,N
\\
\Gamma \vdash P: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lleqMaxR2}]{\Gamma \vdash {\sf lleq}\,M\,({\sf lmax}\,N\,P)}{
\begin{stack}
\Gamma \vdash {\sf lleq}\,M\,P
\\
\Gamma \vdash N: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lleqResp}]{\Gamma \vdash {\sf lleq}\,M\,N}{
\begin{stack}
\Gamma \vdash M'= M: {\sf level}
\\
\Gamma \vdash N'= N: {\sf level}
\\
\Gamma \vdash {\sf lleq}\,M'\,N'
\end{stack}}
\]

\[
\infer[{\tt lsuccMaxDistTrans}]{\Gamma \vdash M= {\sf lsucc}\,({\sf lmax}\,N\,P): {\sf level}}{
\begin{stack}
\Gamma \vdash M= {\sf lmax}\,({\sf lsucc}\,N)\,({\sf lsucc}\,P): {\sf level}
\end{stack}}
\]

\[
\infer[{\tt lzeroType}]{\Gamma \vdash {\sf lzero}: {\sf level}}{}
\]

\[
\infer[{\tt lsuccType}]{\Gamma \vdash {\sf lsucc}: {\sf arrow}\,{\sf level}\,{\sf level}}{}
\]

\[
\infer[{\tt lmaxType}]{\Gamma \vdash {\sf lmax}: {\sf arrow}\,{\sf level}\,({\sf arrow}\,{\sf level}\,{\sf level})}{}
\]

\[
\infer[{\tt eqForm}]{\Gamma \vdash (M= P: A): {\sf type}}{
\begin{stack}
\Gamma \vdash M: A
\\
\Gamma \vdash P: A
\end{stack}}
\]

\[
\infer[{\tt eqEq}]{\Gamma \vdash (M= P: A)= (N= Q: B): {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\\
\Gamma \vdash M= N: A
\\
\Gamma \vdash P= Q: A
\end{stack}}
\]

\[
\infer[{\tt eqFormUniv}]{\Gamma \vdash (M= P: A): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash P: A
\end{stack}}
\]

\[
\infer[{\tt eqEqUniv}]{\Gamma \vdash (M= P: A)= (N= Q: B): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb U}_{I}
\\
\Gamma \vdash M= N: A
\\
\Gamma \vdash P= Q: A
\end{stack}}
\]

\[
\infer[{\tt eqIntro}]{\Gamma \vdash \star : (M= N: A)}{
\begin{stack}
\Gamma \vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt eqElim}]{\Gamma \vdash M= N: A}{
\begin{stack}
\Gamma \vdash P: (M= N: A)
\end{stack}}
\]

\[
\infer[{\tt eqTrivialize}]{\Gamma \vdash M= N: A}{
\begin{stack}
\Gamma \vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt eqExt}]{\Gamma \vdash P= Q: (M= N: A)}{
\begin{stack}
\Gamma \vdash P: (M= N: A)
\\
\Gamma \vdash Q: (M= N: A)
\end{stack}}
\]

\[
\infer[{\tt eqLeft}]{\Gamma_1 ,x\mathord{:}(P= Q: A), \Gamma_2 \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 , [\star /x]\Gamma_2\vdash [\star /x]B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt eqRefl}]{\Gamma \vdash M= M: A}{
\begin{stack}
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt eqSymm}]{\Gamma \vdash M= N: A}{
\begin{stack}
\Gamma \vdash N= M: A
\end{stack}}
\]

\[
\infer[{\tt eqTrans}]{\Gamma \vdash M= P: A}{
\begin{stack}
\Gamma \vdash M= N: A
\\
\Gamma \vdash N= P: A
\end{stack}}
\]

\[
\infer[{\tt eqFormInv1}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash (M= N: A): {\sf type}
\end{stack}}
\]

\[
\infer[{\tt eqFormInv2}]{\Gamma \vdash M: A}{
\begin{stack}
\Gamma \vdash (M= N: A): {\sf type}
\end{stack}}
\]

\[
\infer[{\tt eqFormInv3}]{\Gamma \vdash N: A}{
\begin{stack}
\Gamma \vdash (M= N: A): {\sf type}
\end{stack}}
\]

\[
\infer[{\tt ofForm}]{\Gamma \vdash (M: A): {\sf type}}{
\begin{stack}
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt ofEq}]{\Gamma \vdash (M: A)= (N: B): {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\\
\Gamma \vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt ofFormUniv}]{\Gamma \vdash (M: A): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt ofEqUniv}]{\Gamma \vdash (M: A)= (N: B): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb U}_{I}
\\
\Gamma \vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt ofIntro}]{\Gamma \vdash \star : (M: A)}{
\begin{stack}
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt ofElim}]{\Gamma \vdash M: A}{
\begin{stack}
\Gamma \vdash P: (M: A)
\end{stack}}
\]

\[
\infer[{\tt ofTrivialize}]{\Gamma \vdash M: A}{
\begin{stack}
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt ofExt}]{\Gamma \vdash P= Q: (M: A)}{
\begin{stack}
\Gamma \vdash P: (M: A)
\\
\Gamma \vdash Q: (M: A)
\end{stack}}
\]

\[
\infer[{\tt ofLeft}]{\Gamma_1 ,x\mathord{:}(P: A), \Gamma_2 \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 , [\star /x]\Gamma_2\vdash [\star /x]B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt ofEquand1}]{\Gamma \vdash M: A}{
\begin{stack}
\Gamma \vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt ofEquand2}]{\Gamma \vdash N: A}{
\begin{stack}
\Gamma \vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt eqtpForm}]{\Gamma \vdash (A= B: {\sf type}): {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt eqtpEq}]{\Gamma \vdash (A= C: {\sf type})= (B= D: {\sf type}): {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\\
\Gamma \vdash C= D: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt eqtpFormUniv}]{\Gamma \vdash (A= B: {\sf type}): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt eqtpEqUniv}]{\Gamma \vdash (A= C: {\sf type})= (B= D: {\sf type}): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb U}_{I}
\\
\Gamma \vdash C= D: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt eqtpIntro}]{\Gamma \vdash \star : (A= B: {\sf type})}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt eqtpElim}]{\Gamma \vdash A= B: {\sf type}}{
\begin{stack}
\Gamma \vdash P: (A= B: {\sf type})
\end{stack}}
\]

\[
\infer[{\tt eqtpExt}]{\Gamma \vdash P= Q: (A= B: {\sf type})}{
\begin{stack}
\Gamma \vdash P: (A= B: {\sf type})
\\
\Gamma \vdash Q: (A= B: {\sf type})
\end{stack}}
\]

\[
\infer[{\tt eqtpLeft}]{\Gamma_1 ,x\mathord{:}(A= B: {\sf type}), \Gamma_2 \vdash C\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 , [\star /x]\Gamma_2\vdash [\star /x]C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt eqtpFunct}]{\Gamma \vdash [M/x]B= [N/x]B: {\sf type}}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt eqtpFunctType}]{\Gamma \vdash [B/x]A= [B'/x]A: {\sf type}}{
\begin{stack}
\Gamma ,x\mathord{:}{\sf type}\vdash A: {\sf type}
\\
\Gamma \vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt equivalenceOf}]{\Gamma \vdash M: B}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\\
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt equivalenceEq}]{\Gamma \vdash M= N: B}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\\
\Gamma \vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt equivalence}]{\Gamma \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\\
\Gamma \vdash A\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt equivalenceLeft}]{\Gamma_1 ,x\mathord{:}A, \Gamma_2 \vdash C\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 ,y\mathord{:}(A: {\sf type})\vdash A= B: {\sf type}
\\
\Gamma_1 ,x\mathord{:}B, \Gamma_2\vdash C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt equivalenceLeftAlt}]{\Gamma_1 ,x\mathord{:}A, \Gamma_2 \vdash C\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A, \Gamma_2\vdash A= B: {\sf type}
\\
\Gamma_1 ,x\mathord{:}B, \Gamma_2\vdash C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt eqtpRefl}]{\Gamma \vdash A= A: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt eqtpSymm}]{\Gamma \vdash A= B: {\sf type}}{
\begin{stack}
\Gamma \vdash B= A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt eqtpTrans}]{\Gamma \vdash A= C: {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\\
\Gamma \vdash B= C: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt istpForm}]{\Gamma \vdash (A: {\sf type}): {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt istpEq}]{\Gamma \vdash (A: {\sf type})= (B: {\sf type}): {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt istpFormUniv}]{\Gamma \vdash (A: {\sf type}): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt istpEqUniv}]{\Gamma \vdash (A: {\sf type})= (B: {\sf type}): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt istpIntro}]{\Gamma \vdash \star : (A: {\sf type})}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt istpElim}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash P: (A: {\sf type})
\end{stack}}
\]

\[
\infer[{\tt istpExt}]{\Gamma \vdash P= Q: (A: {\sf type})}{
\begin{stack}
\Gamma \vdash P: (A: {\sf type})
\\
\Gamma \vdash Q: (A: {\sf type})
\end{stack}}
\]

\[
\infer[{\tt istpLeft}]{\Gamma_1 ,x\mathord{:}(A: {\sf type}), \Gamma_2 \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 , [\star /x]\Gamma_2\vdash [\star /x]B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt inhabitedForm}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash A
\end{stack}}
\]

\[
\infer[{\tt subtypeForm}]{\Gamma \vdash {\sf subtype}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt subtypeEq}]{\Gamma \vdash {\sf subtype}\,A\,C= {\sf subtype}\,B\,D: {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\\
\Gamma \vdash C= D: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt subtypeFormUniv}]{\Gamma \vdash {\sf subtype}\,A\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt subtypeEqUniv}]{\Gamma \vdash {\sf subtype}\,A\,C= {\sf subtype}\,B\,D: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb U}_{I}
\\
\Gamma \vdash C= D: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt subtypeIntro}]{\Gamma \vdash \star : {\sf subtype}\,A\,B}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt subtypeElim}]{\Gamma \vdash {\sf subtype}\,A\,B}{
\begin{stack}
\Gamma \vdash P: {\sf subtype}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt subtypeExt}]{\Gamma \vdash P= Q: {\sf subtype}\,A\,B}{
\begin{stack}
\Gamma \vdash P: {\sf subtype}\,A\,B
\\
\Gamma \vdash Q: {\sf subtype}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt subtypeLeft}]{\Gamma_1 ,x\mathord{:}({\sf subtype}\,A\,B), \Gamma_2 \vdash C\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 , [\star /x]\Gamma_2\vdash [\star /x]C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt subtypeEstablish}]{\Gamma \vdash {\sf subtype}\,A\,B}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash x: B
\end{stack}}
\]

\[
\infer[{\tt subsumptionOf}]{\Gamma \vdash M: B}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,B
\\
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt subsumptionEq}]{\Gamma \vdash M= N: B}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,B
\\
\Gamma \vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt subsumption}]{\Gamma \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,B
\\
\Gamma \vdash A\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt subsumptionAlt}]{\Gamma \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,B\,A
\\
\Gamma \vdash A\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt subsumptionLeft}]{\Gamma_1 ,x\mathord{:}A, \Gamma_2 \vdash C\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 ,y\mathord{:}(A: {\sf type})\vdash {\sf eeqtp}\,A\,B
\\
\Gamma_1 ,x\mathord{:}B, \Gamma_2\vdash C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt subsumptionLeftAlt}]{\Gamma_1 ,x\mathord{:}A, \Gamma_2 \vdash C\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A, \Gamma_2\vdash {\sf eeqtp}\,A\,B
\\
\Gamma_1 ,x\mathord{:}B, \Gamma_2\vdash C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt subsumptionLast}]{\Gamma_1 ,x\mathord{:}A, \Gamma_2 \vdash C\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A\vdash {\sf subtype}\,A\,B
\\
\Gamma_1 ,x\mathord{:}B\vdash C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt tighten}]{\Gamma_1 ,x\mathord{:}A, \Gamma_2 \vdash C\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A, \Gamma_2\vdash {\sf subtype}\,B\,A
\\
\Gamma_1 ,x\mathord{:}A, \Gamma_2\vdash x: B
\\
\Gamma_1 ,x\mathord{:}B, \Gamma_2\vdash C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt subtypeRefl}]{\Gamma \vdash {\sf subtype}\,A\,A}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt subtypeReflEqtype}]{\Gamma \vdash {\sf subtype}\,A\,B}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt subtypeTrans}]{\Gamma \vdash {\sf subtype}\,A\,C}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,B
\\
\Gamma \vdash {\sf subtype}\,B\,C
\end{stack}}
\]

\[
\infer[{\tt subtypeIstp1}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt subtypeIstp2}]{\Gamma \vdash B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt eeqtpForm}]{\Gamma \vdash {\sf eeqtp}\,A\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt eeqtpEq}]{\Gamma \vdash {\sf eeqtp}\,A\,C= {\sf eeqtp}\,B\,D: {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\\
\Gamma \vdash C= D: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt eeqtpFormUniv}]{\Gamma \vdash {\sf eeqtp}\,A\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt eeqtpEqUniv}]{\Gamma \vdash {\sf eeqtp}\,A\,C= {\sf eeqtp}\,B\,D: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb U}_{I}
\\
\Gamma \vdash C= D: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt setForm}]{\Gamma \vdash {\sf set}\,\{x : A\}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt setEq}]{\Gamma \vdash {\sf set}\,\{x : A\}\,B= {\sf set}\,\{x : A'\}\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf iff}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt setFormUniv}]{\Gamma \vdash {\sf set}\,\{x : A\}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt setEqUniv}]{\Gamma \vdash {\sf set}\,\{x : A\}\,B= {\sf set}\,\{x : A'\}\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash {\sf iff}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt setWeakenOf}]{\Gamma \vdash M: A}{
\begin{stack}
\Gamma \vdash M: {\sf set}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt setWeakenEq}]{\Gamma \vdash M= N: A}{
\begin{stack}
\Gamma \vdash M= N: {\sf set}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt setWeaken}]{\Gamma \vdash A\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash {\sf set}\,\{x : A\}\,B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt setIntroOf}]{\Gamma \vdash M: {\sf set}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash [M/x]B
\end{stack}}
\]

\[
\infer[{\tt setIntroEq}]{\Gamma \vdash M= N: {\sf set}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M= N: A
\\
\Gamma \vdash [M/x]B
\end{stack}}
\]

\[
\infer[{\tt setIntro}]{\Gamma \vdash {\sf set}\,\{x : A\}\,B\:{\sf ext}\:M}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash [M/x]B
\end{stack}}
\]

\[
\infer[{\tt setIntroOfSquash}]{\Gamma \vdash M: {\sf set}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash {\sf squash}\,[M/x]B
\end{stack}}
\]

\[
\infer[{\tt setIntroEqSquash}]{\Gamma \vdash M= N: {\sf set}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M= N: A
\\
\Gamma \vdash {\sf squash}\,[M/x]B
\end{stack}}
\]

\[
\infer[{\tt squashIntroOfSquash}]{\Gamma \vdash \star : {\sf squash}\,A}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf squash}\,A
\end{stack}}
\]

\[
\infer[{\tt setElim}]{\Gamma \vdash C\:{\sf ext}\:[\star /y]N}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: {\sf set}\,\{x : A\}\,B
\\
\Gamma ,y\mathord{:}[[M/x]B]\vdash C\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt setLeft}]{\Gamma_1 ,x\mathord{:}({\sf set}\,\{x : A\}\,B), \Gamma_2 \vdash C\:{\sf ext}\:[\star /y]M}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma_1 ,x\mathord{:}A,y\mathord{:}[B], \Gamma_2\vdash C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt setSquash}]{\Gamma \vdash {\sf set}\,\{x : A\}\,B= {\sf set}\,\{x : A\}\,({\sf squash}\,B): {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf set}\,\{x : A\}\,B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt setFormInv}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf set}\,\{x : A\}\,B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt setSubElim}]{\Gamma \vdash {\sf subtype}\,({\sf set}\,\{x : A\}\,B)\,A'}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt isetForm}]{\Gamma \vdash {\sf iset}\,\{x : A\}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt isetEq}]{\Gamma \vdash {\sf iset}\,\{x : A\}\,B= {\sf iset}\,\{x : A'\}\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt isetFormUniv}]{\Gamma \vdash {\sf iset}\,\{x : A\}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt isetEqUniv}]{\Gamma \vdash {\sf iset}\,\{x : A\}\,B= {\sf iset}\,\{x : A'\}\,B': {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A\vdash B= B': {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt isetWeakenOf}]{\Gamma \vdash M: A}{
\begin{stack}
\Gamma \vdash M: {\sf iset}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt isetWeakenEq}]{\Gamma \vdash M= N: A}{
\begin{stack}
\Gamma \vdash M= N: {\sf iset}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt isetWeaken}]{\Gamma \vdash A\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash {\sf iset}\,\{x : A\}\,B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt isetIntroOf}]{\Gamma \vdash M: {\sf iset}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash [M/x]B
\end{stack}}
\]

\[
\infer[{\tt isetIntroEq}]{\Gamma \vdash M= N: {\sf iset}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M= N: A
\\
\Gamma \vdash [M/x]B
\end{stack}}
\]

\[
\infer[{\tt isetIntro}]{\Gamma \vdash {\sf iset}\,\{x : A\}\,B\:{\sf ext}\:M}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash [M/x]B
\end{stack}}
\]

\[
\infer[{\tt isetIntroOfSquash}]{\Gamma \vdash M: {\sf iset}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash {\sf squash}\,[M/x]B
\end{stack}}
\]

\[
\infer[{\tt isetIntroEqSquash}]{\Gamma \vdash M= N: {\sf iset}\,\{x : A\}\,B}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M= N: A
\\
\Gamma \vdash {\sf squash}\,[M/x]B
\end{stack}}
\]

\[
\infer[{\tt isetElim}]{\Gamma \vdash C\:{\sf ext}\:[\star /y]N}{
\begin{stack}
\Gamma \vdash M: {\sf iset}\,\{x : A\}\,B
\\
\Gamma ,y\mathord{:}[[M/x]B]\vdash C\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt isetLeft}]{\Gamma_1 ,x\mathord{:}({\sf iset}\,\{x : A\}\,B), \Gamma_2 \vdash C\:{\sf ext}\:[\star /y]M}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A,y\mathord{:}[B], \Gamma_2\vdash C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt isetFormInv1}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf iset}\,\{x : A\}\,B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt isetFormInv2}]{\Gamma \vdash [M/x]B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf iset}\,\{x : A\}\,B: {\sf type}
\\
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt isetSubElim}]{\Gamma \vdash {\sf subtype}\,({\sf iset}\,\{x : A\}\,B)\,A'}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt squashForm}]{\Gamma \vdash {\sf squash}\,A: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt squashEq}]{\Gamma \vdash {\sf squash}\,A= {\sf squash}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf iff}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt squashFormUniv}]{\Gamma \vdash {\sf squash}\,A: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt squashEqUniv}]{\Gamma \vdash {\sf squash}\,A= {\sf squash}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\\
\Gamma \vdash {\sf iff}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt squashIntroOf}]{\Gamma \vdash \star : {\sf squash}\,A}{
\begin{stack}
\Gamma \vdash A
\end{stack}}
\]

\[
\infer[{\tt squashIntro}]{\Gamma \vdash {\sf squash}\,A}{
\begin{stack}
\Gamma \vdash A
\end{stack}}
\]

\[
\infer[{\tt squashElim}]{\Gamma \vdash C\:{\sf ext}\:[\star /x]N}{
\begin{stack}
\Gamma \vdash M: {\sf squash}\,A
\\
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}[A]\vdash C\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt squashExt}]{\Gamma \vdash M= N: {\sf squash}\,A}{
\begin{stack}
\Gamma \vdash M: {\sf squash}\,A
\\
\Gamma \vdash N: {\sf squash}\,A
\\
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt squashLeft}]{\Gamma_1 ,x\mathord{:}({\sf squash}\,A), \Gamma_2 \vdash C\:{\sf ext}\:[\star /y]M}{
\begin{stack}
\Gamma_1 \vdash A: {\sf type}
\\
\Gamma_1 ,y\mathord{:}[A], [\star /x]\Gamma_2\vdash [\star /x]C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt squashSub}]{\Gamma \vdash {\sf subtype}\,({\sf squash}\,A)\,({\sf squash}\,B)}{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash {\sf arrow}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt isquashForm}]{\Gamma \vdash {\sf isquash}\,A: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt isquashEq}]{\Gamma \vdash {\sf isquash}\,A= {\sf isquash}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt isquashFormUniv}]{\Gamma \vdash {\sf isquash}\,A: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt isquashEqUniv}]{\Gamma \vdash {\sf isquash}\,A= {\sf isquash}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash B: {\Bbb U}_{I}
\\
\Gamma \vdash A= B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt isquashIntroOf}]{\Gamma \vdash \star : {\sf isquash}\,A}{
\begin{stack}
\Gamma \vdash A
\end{stack}}
\]

\[
\infer[{\tt isquashIntro}]{\Gamma \vdash {\sf isquash}\,A}{
\begin{stack}
\Gamma \vdash A
\end{stack}}
\]

\[
\infer[{\tt isquashIntroOfIsquash}]{\Gamma \vdash \star : {\sf isquash}\,A}{
\begin{stack}
\Gamma \vdash {\sf isquash}\,A
\end{stack}}
\]

\[
\infer[{\tt isquashElim}]{\Gamma \vdash C\:{\sf ext}\:[\star /x]N}{
\begin{stack}
\Gamma \vdash M: {\sf isquash}\,A
\\
\Gamma ,x\mathord{:}[A]\vdash C\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt isquashExt}]{\Gamma \vdash M= N: {\sf isquash}\,A}{
\begin{stack}
\Gamma \vdash M: {\sf isquash}\,A
\\
\Gamma \vdash N: {\sf isquash}\,A
\end{stack}}
\]

\[
\infer[{\tt isquashLeft}]{\Gamma_1 ,x\mathord{:}({\sf isquash}\,A), \Gamma_2 \vdash C\:{\sf ext}\:[\star /y]M}{
\begin{stack}
\Gamma_1 ,y\mathord{:}[A], [\star /x]\Gamma_2\vdash [\star /x]C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt isquashSub}]{\Gamma \vdash {\sf subtype}\,({\sf isquash}\,A)\,({\sf isquash}\,B)}{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash {\sf arrow}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt isquashFormInv}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf isquash}\,A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt quotientForm}]{\Gamma \vdash {\sf quotient}\,\{x : A\}\,(\lambda y.\,B): {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma ,x'\mathord{:}A,y'\mathord{:}A,w\mathord{:}[x', y'/x, y]B\vdash [y', x'/x, y]B
\\
\Gamma ,x'\mathord{:}A,y'\mathord{:}A,z'\mathord{:}A,w\mathord{:}[x', y'/x, y]B,w'\mathord{:}[y', z'/x, y]B\vdash [x', z'/x, y]B
\end{stack}}
\]

\[
\infer[{\tt quotientEq}]{\Gamma \vdash {\sf quotient}\,\{x : A\}\,(\lambda y.\,B)= {\sf quotient}\,\{x : A'\}\,(\lambda y.\,B'): {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B': {\sf type}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B\vdash B'
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B'\vdash B
\\
\Gamma ,x'\mathord{:}A,y'\mathord{:}A,w\mathord{:}[x', y'/x, y]B\vdash [y', x'/x, y]B
\\
\Gamma ,x'\mathord{:}A,y'\mathord{:}A,z'\mathord{:}A,w\mathord{:}[x', y'/x, y]B,w'\mathord{:}[y', z'/x, y]B\vdash [x', z'/x, y]B
\end{stack}}
\]

\[
\infer[{\tt quotientFormUniv}]{\Gamma \vdash {\sf quotient}\,\{x : A\}\,(\lambda y.\,B): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B: {\Bbb U}_{I}
\\
\Gamma ,x'\mathord{:}A,y'\mathord{:}A,w\mathord{:}[x', y'/x, y]B\vdash [y', x'/x, y]B
\\
\Gamma ,x'\mathord{:}A,y'\mathord{:}A,z'\mathord{:}A,w\mathord{:}[x', y'/x, y]B,w'\mathord{:}[y', z'/x, y]B\vdash [x', z'/x, y]B
\end{stack}}
\]

\[
\infer[{\tt quotientEqUniv}]{\Gamma \vdash {\sf quotient}\,\{x : A\}\,(\lambda y.\,B)= {\sf quotient}\,\{x : A'\}\,(\lambda y.\,B'): {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= A': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B: {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B': {\Bbb U}_{I}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B\vdash B'
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B'\vdash B
\\
\Gamma ,x'\mathord{:}A,y'\mathord{:}A,w\mathord{:}[x', y'/x, y]B\vdash [y', x'/x, y]B
\\
\Gamma ,x'\mathord{:}A,y'\mathord{:}A,z'\mathord{:}A,w\mathord{:}[x', y'/x, y]B,w'\mathord{:}[y', z'/x, y]B\vdash [x', z'/x, y]B
\end{stack}}
\]

\[
\infer[{\tt quotientIntroOf}]{\Gamma \vdash M: {\sf quotient}\,\{x : A\}\,(\lambda y.\,B)}{
\begin{stack}
\Gamma \vdash {\sf quotient}\,\{x : A\}\,(\lambda y.\,B): {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash [M, M/x, y]B
\end{stack}}
\]

\[
\infer[{\tt quotientIntroEq}]{\Gamma \vdash M= N: {\sf quotient}\,\{x : A\}\,(\lambda y.\,B)}{
\begin{stack}
\Gamma \vdash {\sf quotient}\,\{x : A\}\,(\lambda y.\,B): {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash N: A
\\
\Gamma \vdash [M, N/x, y]B
\end{stack}}
\]

\[
\infer[{\tt quotientElimOf}]{\Gamma \vdash [M/z]P: [M/z]C}{
\begin{stack}
\Gamma \vdash M: {\sf quotient}\,\{x : A\}\,(\lambda y.\,B)
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B))\vdash C: {\sf type}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B\vdash [x/z]P= [y/z]P: [x/z]C
\end{stack}}
\]

\[
\infer[{\tt quotientElimEq}]{\Gamma \vdash [M/z]P= [N/z]Q: [M/z]C}{
\begin{stack}
\Gamma \vdash M= N: {\sf quotient}\,\{x : A\}\,(\lambda y.\,B)
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B))\vdash C: {\sf type}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B\vdash [x/z]P= [y/z]Q: [x/z]C
\end{stack}}
\]

\[
\infer[{\tt quotientElimIstype}]{\Gamma \vdash [M/z]C: {\sf type}}{
\begin{stack}
\Gamma \vdash M: {\sf quotient}\,\{x : A\}\,(\lambda y.\,B)
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B\vdash [x/z]C= [y/z]C: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt quotientElimEqtype}]{\Gamma \vdash [M/z]C= [N/z]D: {\sf type}}{
\begin{stack}
\Gamma \vdash M= N: {\sf quotient}\,\{x : A\}\,(\lambda y.\,B)
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B\vdash [x/z]C= [y/z]D: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt quotientDescent}]{\Gamma \vdash C\:{\sf ext}\:[\star /z]P}{
\begin{stack}
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash C: {\sf type}
\\
\Gamma \vdash M: A
\\
\Gamma \vdash N: A
\\
\Gamma \vdash M= N: {\sf quotient}\,\{x : A\}\,(\lambda y.\,B)
\\
\Gamma ,z\mathord{:}[[M, N/x, y]B]\vdash C\:{\sf ext}\:P
\end{stack}}
\]

\[
\infer[{\tt quotientLeft}]{\Gamma_1 ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B)), \Gamma_2 \vdash C\:{\sf ext}\:[\star /z']M}{
\begin{stack}
\Gamma_1 ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B)), \Gamma_2\vdash C: {\sf type}
\\
\Gamma_1 ,z'\mathord{:}[A], [z'/z]\Gamma_2\vdash [z'/z]C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt quotientLeftRefl}]{\Gamma_1 ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B)), \Gamma_2 \vdash C\:{\sf ext}\:[\star , \star /v, w]M}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma_1 ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B)), \Gamma_2\vdash C: {\sf type}
\\
\Gamma_1 ,v\mathord{:}[A],w\mathord{:}[[v, v/x, y]B], [v/z]\Gamma_2\vdash [v/z]C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt quotientLeftIstype}]{\Gamma_1 ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B)), \Gamma_2 \vdash C: {\sf type}}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B, [x/z]\Gamma_2\vdash [x/z]C= [y/z]C: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt quotientLeftEqtype}]{\Gamma_1 ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B)), \Gamma_2 \vdash C= D: {\sf type}}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B, [x/z]\Gamma_2\vdash [x/z]C= [y/z]D: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt quotientLeftOf}]{\Gamma_1 ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B)), \Gamma_2 \vdash M: C}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B, [x/z]\Gamma_2\vdash [x/z]M= [y/z]M: C
\end{stack}}
\]

\[
\infer[{\tt quotientLeftEq}]{\Gamma_1 ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B)), \Gamma_2 \vdash M= N: C}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B, [x/z]\Gamma_2\vdash [x/z]M= [y/z]N: C
\end{stack}}
\]

\[
\infer[{\tt quotientLeftOfDep}]{\Gamma_1 ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B)), \Gamma_2 \vdash M: C}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B, [x/z]\Gamma_2\vdash [x/z]C= [y/z]C: {\sf type}
\\
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B, [x/z]\Gamma_2\vdash [x/z]M= [y/z]M: [x/z]C
\end{stack}}
\]

\[
\infer[{\tt quotientLeftEqDep}]{\Gamma_1 ,z\mathord{:}({\sf quotient}\,\{x : A\}\,(\lambda y.\,B)), \Gamma_2 \vdash M= N: C}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B, [x/z]\Gamma_2\vdash [x/z]C= [y/z]C: {\sf type}
\\
\Gamma_1 ,x\mathord{:}A,y\mathord{:}A,w\mathord{:}B, [x/z]\Gamma_2\vdash [x/z]M= [y/z]N: [x/z]C
\end{stack}}
\]

\[
\infer[{\tt quotientFormInv}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf quotient}\,\{x : A\}\,(\lambda y.\,B): {\sf type}
\end{stack}}
\]

\[
\infer[{\tt iforallForm}]{\Gamma \vdash {\sf iforall}\,I\,K\,(\lambda x.\,A): {\sf type}}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt iforallEq}]{\Gamma \vdash {\sf iforall}\,I\,K\,(\lambda x.\,A)= {\sf iforall}\,I\,L\,(\lambda x.\,B): {\sf type}}{
\begin{stack}
\Gamma \vdash K= L: {\Bbb K}_{I}
\\
\Gamma ,x\mathord{:}K\vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt iforallFormUniv}]{\Gamma \vdash {\sf iforall}\,I\,K\,(\lambda x.\,A): {\Bbb U}_{J}}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma \vdash {\sf lleq}\,I\,J
\\
\Gamma ,x\mathord{:}K\vdash A: {\Bbb U}_{J}
\end{stack}}
\]

\[
\infer[{\tt iforallEqUniv}]{\Gamma \vdash {\sf iforall}\,I\,K\,(\lambda x.\,A)= {\sf iforall}\,I\,L\,(\lambda x.\,B): {\Bbb U}_{J}}{
\begin{stack}
\Gamma \vdash K= L: {\Bbb K}_{I}
\\
\Gamma \vdash {\sf lleq}\,I\,J
\\
\Gamma ,x\mathord{:}K\vdash A= B: {\Bbb U}_{J}
\end{stack}}
\]

\[
\infer[{\tt iforallIntroOf}]{\Gamma \vdash M: {\sf iforall}\,I\,K\,(\lambda x.\,A)}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma ,x\mathord{:}K\vdash M: A
\end{stack}}
\]

\[
\infer[{\tt iforallIntroEq}]{\Gamma \vdash M= N: {\sf iforall}\,I\,K\,(\lambda x.\,A)}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma ,x\mathord{:}K\vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt iforallIntro}]{\Gamma \vdash {\sf iforall}\,I\,K\,(\lambda x.\,A)\:{\sf ext}\:[\star /x]M}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma ,x\mathord{:}[K]\vdash A\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt iforallElimOf}]{\Gamma \vdash M: [P/x]A}{
\begin{stack}
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf iforall}\,I\,K\,(\lambda x.\,A)
\\
\Gamma \vdash P: K
\end{stack}}
\]

\[
\infer[{\tt iforallElimEq}]{\Gamma \vdash M= N: [P/x]A}{
\begin{stack}
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma \vdash M= N: {\sf iforall}\,I\,K\,(\lambda x.\,A)
\\
\Gamma \vdash P: K
\end{stack}}
\]

\[
\infer[{\tt iforallElim}]{\Gamma \vdash [P/x]A\:{\sf ext}\:M}{
\begin{stack}
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma \vdash {\sf iforall}\,I\,K\,(\lambda x.\,A)\:{\sf ext}\:M
\\
\Gamma \vdash P: K
\end{stack}}
\]

\[
\infer[{\tt foralltpForm}]{\Gamma \vdash {\sf foralltp}\,(\lambda t.\,A): {\sf type}}{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt foralltpEq}]{\Gamma \vdash {\sf foralltp}\,(\lambda t.\,A)= {\sf foralltp}\,(\lambda t.\,B): {\sf type}}{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt foralltpIntroOf}]{\Gamma \vdash M: {\sf foralltp}\,(\lambda t.\,A)}{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash M: A
\end{stack}}
\]

\[
\infer[{\tt foralltpIntroEq}]{\Gamma \vdash M= N: {\sf foralltp}\,(\lambda t.\,A)}{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt foralltpIntro}]{\Gamma \vdash {\sf foralltp}\,(\lambda t.\,A)\:{\sf ext}\:[\star /t]M}{
\begin{stack}
\Gamma ,t\mathord{:}[{\sf type}]\vdash A\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt foralltpElimOf}]{\Gamma \vdash M: [B/t]A}{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf foralltp}\,(\lambda t.\,A)
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt foralltpElimEq}]{\Gamma \vdash M= N: [B/t]A}{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash A: {\sf type}
\\
\Gamma \vdash M= N: {\sf foralltp}\,(\lambda t.\,A)
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt foralltpElim}]{\Gamma \vdash [B/t]A\:{\sf ext}\:M}{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash A: {\sf type}
\\
\Gamma \vdash {\sf foralltp}\,(\lambda t.\,A)\:{\sf ext}\:M
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt iexistsForm}]{\Gamma \vdash {\sf iexists}\,I\,K\,(\lambda x.\,A): {\sf type}}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt iexistsEq}]{\Gamma \vdash {\sf iexists}\,I\,K\,(\lambda x.\,A)= {\sf iexists}\,I\,L\,(\lambda x.\,B): {\sf type}}{
\begin{stack}
\Gamma \vdash K= L: {\Bbb K}_{I}
\\
\Gamma ,x\mathord{:}K\vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt iexistsFormUniv}]{\Gamma \vdash {\sf iexists}\,I\,K\,(\lambda x.\,A): {\Bbb U}_{J}}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma \vdash {\sf lleq}\,I\,J
\\
\Gamma ,x\mathord{:}K\vdash A: {\Bbb U}_{J}
\end{stack}}
\]

\[
\infer[{\tt iexistsEqUniv}]{\Gamma \vdash {\sf iexists}\,I\,K\,(\lambda x.\,A)= {\sf iexists}\,I\,L\,(\lambda x.\,B): {\Bbb U}_{J}}{
\begin{stack}
\Gamma \vdash K= L: {\Bbb K}_{I}
\\
\Gamma \vdash {\sf lleq}\,I\,J
\\
\Gamma ,x\mathord{:}K\vdash A= B: {\Bbb U}_{J}
\end{stack}}
\]

\[
\infer[{\tt iexistsIntroOf}]{\Gamma \vdash M: {\sf iexists}\,I\,K\,(\lambda x.\,A)}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma \vdash B: K
\\
\Gamma \vdash M: [B/x]A
\end{stack}}
\]

\[
\infer[{\tt iexistsIntroEq}]{\Gamma \vdash M= N: {\sf iexists}\,I\,K\,(\lambda x.\,A)}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma \vdash B: K
\\
\Gamma \vdash M= N: [B/x]A
\end{stack}}
\]

\[
\infer[{\tt iexistsIntro}]{\Gamma \vdash {\sf iexists}\,I\,K\,(\lambda x.\,A)\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash K: {\Bbb K}_{I}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma \vdash B: K
\\
\Gamma \vdash [B/x]A\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt iexistsElimOf}]{\Gamma \vdash [M/y]P: B}{
\begin{stack}
\Gamma \vdash K: {\sf type}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}K,y\mathord{:}A\vdash P: B
\\
\Gamma \vdash M: {\sf iexists}\,I\,K\,(\lambda x.\,A)
\end{stack}}
\]

\[
\infer[{\tt iexistsElimEq}]{\Gamma \vdash [M/y]P= [N/y]Q: B}{
\begin{stack}
\Gamma \vdash K: {\sf type}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}K,y\mathord{:}A\vdash P= Q: B
\\
\Gamma \vdash M= N: {\sf iexists}\,I\,K\,(\lambda x.\,A)
\end{stack}}
\]

\[
\infer[{\tt iexistsElim}]{\Gamma \vdash B\:{\sf ext}\:[\star , M/x, y]P}{
\begin{stack}
\Gamma \vdash K: {\sf type}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}[K],y\mathord{:}A\vdash B\:{\sf ext}\:P
\\
\Gamma \vdash M: {\sf iexists}\,I\,K\,(\lambda x.\,A)
\end{stack}}
\]

\[
\infer[{\tt iexistsElimOfDep}]{\Gamma \vdash [M/y]P: [M/y]B}{
\begin{stack}
\Gamma \vdash K: {\sf type}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}K,y\mathord{:}A\vdash P: B
\\
\Gamma \vdash M: {\sf iexists}\,I\,K\,(\lambda x.\,A)
\end{stack}}
\]

\[
\infer[{\tt iexistsElimEqDep}]{\Gamma \vdash [M/y]P= [N/y]Q: [M/y]B}{
\begin{stack}
\Gamma \vdash K: {\sf type}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}K,y\mathord{:}A\vdash P= Q: B
\\
\Gamma \vdash M= N: {\sf iexists}\,I\,K\,(\lambda x.\,A)
\end{stack}}
\]

\[
\infer[{\tt iexistsElimDep}]{\Gamma \vdash [M/y]B\:{\sf ext}\:[\star , M/x, y]P}{
\begin{stack}
\Gamma \vdash K: {\sf type}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}[K],y\mathord{:}A\vdash B\:{\sf ext}\:P
\\
\Gamma \vdash M: {\sf iexists}\,I\,K\,(\lambda x.\,A)
\end{stack}}
\]

\[
\infer[{\tt iexistsElimIstype}]{\Gamma \vdash [M/y]B: {\sf type}}{
\begin{stack}
\Gamma \vdash K: {\sf type}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}K,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash M: {\sf iexists}\,I\,K\,(\lambda x.\,A)
\end{stack}}
\]

\[
\infer[{\tt iexistsElimEqtype}]{\Gamma \vdash [M/y]B= [N/y]C: {\sf type}}{
\begin{stack}
\Gamma \vdash K: {\sf type}
\\
\Gamma ,x\mathord{:}K\vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}K,y\mathord{:}A\vdash B= C: {\sf type}
\\
\Gamma \vdash M= N: {\sf iexists}\,I\,K\,(\lambda x.\,A)
\end{stack}}
\]

\[
\infer[{\tt substitution}]{\Gamma_1 ,x\mathord{:}A, \Gamma_2 \vdash B\:{\sf ext}\:N}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A, \Gamma_2\vdash B: {\sf type}
\\
\Gamma_1 ,x\mathord{:}A, \Gamma_2\vdash x= M: A
\\
\Gamma_1 , [M/x]\Gamma_2\vdash [M/x]B\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt substitutionSimple}]{\Gamma_1 ,x\mathord{:}A, \Gamma_2 \vdash B\:{\sf ext}\:N}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A, \Gamma_2\vdash x= M: A
\\
\Gamma_1 , [M/x]\Gamma_2\vdash B\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt generalize}]{\Gamma \vdash [M/x]B\:{\sf ext}\:[M/x]N}{
\begin{stack}
\Gamma \vdash M: A
\\
\Gamma ,x\mathord{:}A\vdash B\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt assert}]{\Gamma \vdash B\:{\sf ext}\:{\sf let}\,\{x : M\}\,N}{
\begin{stack}
\Gamma \vdash A\:{\sf ext}\:M
\\
\Gamma ,x\mathord{:}A\vdash B\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt assert'}]{\Gamma \vdash B\:{\sf ext}\:[M/x]N}{
\begin{stack}
\Gamma \vdash A\:{\sf ext}\:M
\\
\Gamma ,x\mathord{:}A\vdash B\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt inhabitant}]{\Gamma \vdash A\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt letForm}]{\Gamma \vdash {\sf let}\,\{x : M\}\,N: B}{
\begin{stack}
\Gamma \vdash M: A
\\
\Gamma ,x\mathord{:}A\vdash N: B
\end{stack}}
\]

\[
\infer[{\tt lethForm}]{\Gamma \vdash {\sf leth}\,\{x : M\}\,N: B}{
\begin{stack}
\Gamma \vdash M: A
\\
\Gamma ,x\mathord{:}A\vdash N: B
\end{stack}}
\]

\[
\infer[{\tt leteForm}]{\Gamma \vdash {\sf lete}\,\{x : M\}\,N: B}{
\begin{stack}
\Gamma \vdash M: A
\\
\Gamma ,x\mathord{:}A\vdash N: B
\end{stack}}
\]

\[
\infer[{\tt accInd}]{\Gamma \vdash [M/w]B\:{\sf ext}\:{\sf fix}\,(\lambda g.\,\lambda x.\,[\lambda y.\,\lambda r.\,g\,y/z]P)\,M}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\\
\Gamma \vdash R: {\sf arrow}\,A\,({\sf arrow}\,A\,{\Bbb U}_{I})
\\
\Gamma ,x\mathord{:}A,z\mathord{:}({\sf forall}\,\{y : A\}\,({\sf arrow}\,(R\,y\,x)\,[y/w]B))\vdash [x/w]B\:{\sf ext}\:P
\\
\Gamma \vdash M: A
\\
\Gamma \vdash N: {\sf acc}\,A\,R\,M
\end{stack}}
\]

\[
\infer[{\tt sequalForm}]{\Gamma \vdash {\sf sequal}\,M\,M: {\sf type}}{}
\]

\[
\infer[{\tt sequalIntroOf}]{\Gamma \vdash \star : {\sf sequal}\,M\,M}{}
\]

\[
\infer[{\tt sequalIntro}]{\Gamma \vdash {\sf sequal}\,M\,M}{}
\]

\[
\infer[{\tt sequalTrivialize}]{\Gamma \vdash {\sf sequal}\,M\,N}{
\begin{stack}
\Gamma \vdash {\sf sequal}\,M\,N
\end{stack}}
\]

\[
\infer[{\tt sequalExt}]{\Gamma \vdash P= Q: {\sf sequal}\,M\,N}{
\begin{stack}
\Gamma \vdash P: {\sf sequal}\,M\,N
\\
\Gamma \vdash Q: {\sf sequal}\,M\,N
\end{stack}}
\]

\[
\infer[{\tt sequalLeft}]{\Gamma_1 ,x\mathord{:}({\sf sequal}\,M\,N), \Gamma_2 \vdash C\:{\sf ext}\:P}{
\begin{stack}
\Gamma_1 , [\star /x]\Gamma_2\vdash [\star /x]C\:{\sf ext}\:P
\end{stack}}
\]

\[
\infer[{\tt sequalEq}]{\Gamma \vdash M= N: A}{
\begin{stack}
\Gamma \vdash {\sf sequal}\,M\,N
\\
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt sequalEqtp}]{\Gamma \vdash A= B: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf sequal}\,A\,B
\\
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt sequivalence}]{\Gamma \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma \vdash {\sf sequal}\,A\,B
\\
\Gamma \vdash A\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt sequivalenceLeft}]{\Gamma_1 ,x\mathord{:}A, \Gamma_2 \vdash C\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A, \Gamma_2\vdash {\sf sequal}\,A\,B
\\
\Gamma_1 ,x\mathord{:}B, \Gamma_2\vdash C\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt substitutionSyntactic}]{\Gamma_1 ,x\mathord{:}A, \Gamma_2 \vdash B\:{\sf ext}\:N}{
\begin{stack}
\Gamma_1 ,x\mathord{:}A, \Gamma_2\vdash {\sf sequal}\,x\,M
\\
\Gamma_1 , [M/x]\Gamma_2\vdash [M/x]B\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt sequalSymm}]{\Gamma \vdash {\sf sequal}\,N\,M}{
\begin{stack}
\Gamma \vdash {\sf sequal}\,M\,N
\end{stack}}
\]

\[
\infer[{\tt sequalTrans}]{\Gamma \vdash {\sf sequal}\,M\,P}{
\begin{stack}
\Gamma \vdash {\sf sequal}\,M\,N
\\
\Gamma \vdash {\sf sequal}\,N\,P
\end{stack}}
\]

\[
\infer[{\tt sequalCompat}]{\Gamma \vdash {\sf sequal}\,[M/x]P\,[N/x]P}{
\begin{stack}
\Gamma \vdash {\sf sequal}\,M\,N
\end{stack}}
\]

\[
\infer[{\tt forallEtaSequal}]{\Gamma \vdash {\sf sequal}\,\{x : M\}\,(M\,x)}{
\begin{stack}
\Gamma \vdash M: {\sf forall}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt arrowEtaSequal}]{\Gamma \vdash {\sf sequal}\,\{x : M\}\,(M\,x)}{
\begin{stack}
\Gamma \vdash M: {\sf arrow}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt existsEtaSequal}]{\Gamma \vdash {\sf sequal}\,M\,\langle M\, \pi_1,M\, \pi_2\rangle }{
\begin{stack}
\Gamma \vdash M: {\sf exists}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt prodEtaSequal}]{\Gamma \vdash {\sf sequal}\,M\,\langle M\, \pi_1,M\, \pi_2\rangle }{
\begin{stack}
\Gamma \vdash M: {\sf prod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt futureEtaSequal}]{\Gamma \vdash {\sf sequal}\,M\,({\sf next}\,(M\, {\sf prev}))}{
\begin{stack}
\Gamma \vdash M: {\sf future}\,A
\end{stack}}
\]

\[
\infer[{\tt partialForm}]{\Gamma \vdash {\sf partial}\,A: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt partialEq}]{\Gamma \vdash {\sf partial}\,A= {\sf partial}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt partialFormUniv}]{\Gamma \vdash {\sf partial}\,A: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt partialEqUniv}]{\Gamma \vdash {\sf partial}\,A= {\sf partial}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt partialSub}]{\Gamma \vdash {\sf subtype}\,({\sf partial}\,A)\,({\sf partial}\,B)}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt partialStrict}]{\Gamma \vdash {\sf subtype}\,({\sf partial}\,A)\,({\sf partial}\,({\sf partial}\,A))}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt partialStrictConverse}]{\Gamma \vdash {\sf subtype}\,({\sf partial}\,({\sf partial}\,A))\,({\sf partial}\,A)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt partialIdem}]{\Gamma \vdash {\sf eeqtp}\,({\sf partial}\,({\sf partial}\,A))\,({\sf partial}\,A)\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt haltsForm}]{\Gamma \vdash {\sf halts}\,M: {\sf type}}{
\begin{stack}
\Gamma \vdash M: {\sf partial}\,A
\end{stack}}
\]

\[
\infer[{\tt haltsEq}]{\Gamma \vdash {\sf halts}\,M= {\sf halts}\,N: {\sf type}}{
\begin{stack}
\Gamma \vdash M= N: {\sf partial}\,A
\end{stack}}
\]

\[
\infer[{\tt haltsFormUniv}]{\Gamma \vdash {\sf halts}\,M: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma \vdash M: {\sf partial}\,A
\end{stack}}
\]

\[
\infer[{\tt haltsEqUniv}]{\Gamma \vdash {\sf halts}\,M= {\sf halts}\,N: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma \vdash M= N: {\sf partial}\,A
\end{stack}}
\]

\[
\infer[{\tt partialIntroBottomOf}]{\Gamma \vdash {\sf bottom}: {\sf partial}\,A}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt bottomDiverges}]{\Gamma \vdash {\sf void}}{
\begin{stack}
\Gamma \vdash {\sf halts}\,{\sf bottom}
\end{stack}}
\]

\[
\infer[{\tt partialExt}]{\Gamma \vdash M= N: {\sf partial}\,A}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf iff}\,({\sf halts}\,M)\,({\sf halts}\,N)
\\
\Gamma ,x\mathord{:}({\sf halts}\,M)\vdash M= N: A
\end{stack}}
\]

\[
\infer[{\tt partialElimEq}]{\Gamma \vdash M= N: A}{
\begin{stack}
\Gamma \vdash M= N: {\sf partial}\,A
\\
\Gamma \vdash {\sf halts}\,M
\end{stack}}
\]

\[
\infer[{\tt partialElimOf}]{\Gamma \vdash M: A}{
\begin{stack}
\Gamma \vdash M: {\sf partial}\,A
\\
\Gamma \vdash {\sf halts}\,M
\end{stack}}
\]

\[
\infer[{\tt haltsTrivialize}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash {\sf halts}\,M
\end{stack}}
\]

\[
\infer[{\tt haltsExt}]{\Gamma \vdash N= P: {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash N: {\sf halts}\,M
\\
\Gamma \vdash P: {\sf halts}\,M
\end{stack}}
\]

\[
\infer[{\tt haltsLeft}]{\Gamma_1 ,x\mathord{:}({\sf halts}\,M), \Gamma_2 \vdash C\:{\sf ext}\:N}{
\begin{stack}
\Gamma_1 , [\star /x]\Gamma_2\vdash [\star /x]C\:{\sf ext}\:N
\end{stack}}
\]

\[
\infer[{\tt fixpointInductionEq}]{\Gamma \vdash {\sf fix}\,M= {\sf fix}\,N: {\sf partial}\,A}{
\begin{stack}
\Gamma \vdash M= N: {\sf arrow}\,({\sf partial}\,A)\,({\sf partial}\,A)
\\
\Gamma \vdash {\sf admiss}\,A
\end{stack}}
\]

\[
\infer[{\tt fixpointInductionOf}]{\Gamma \vdash {\sf fix}\,M: {\sf partial}\,A}{
\begin{stack}
\Gamma \vdash M: {\sf arrow}\,({\sf partial}\,A)\,({\sf partial}\,A)
\\
\Gamma \vdash {\sf admiss}\,A
\end{stack}}
\]

\[
\infer[{\tt partialFormInv}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf partial}\,A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt seqBind}]{\Gamma \vdash {\sf seq}\,\{x : M\}\,N= {\sf seq}\,\{x : M'\}\,N': {\sf partial}\,B}{
\begin{stack}
\Gamma \vdash M= M': {\sf partial}\,A
\\
\Gamma ,x\mathord{:}A\vdash N= N': {\sf partial}\,B
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt activeApp}]{\Gamma \vdash M\,N: {\sf partial}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf partial}\,A
\\
\Gamma ,x\mathord{:}A\vdash x\,N: {\sf partial}\,B
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt activeAppSeq}]{\Gamma \vdash M\,N= {\sf seq}\,\{x : M\}\,(x\,N): {\sf partial}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf partial}\,A
\\
\Gamma ,x\mathord{:}A\vdash x\,N: {\sf partial}\,B
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt appHaltsInv}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash {\sf halts}\,(M\,N)
\end{stack}}
\]

\[
\infer[{\tt activePi1}]{\Gamma \vdash M\, \pi_1: {\sf partial}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf partial}\,A
\\
\Gamma ,x\mathord{:}A\vdash x\, \pi_1: {\sf partial}\,B
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt activePi1Seq}]{\Gamma \vdash M\, \pi_1= {\sf seq}\,\{x : M\}\,(x\, \pi_1): {\sf partial}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf partial}\,A
\\
\Gamma ,x\mathord{:}A\vdash x\, \pi_1: {\sf partial}\,B
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt pi1HaltsInv}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash {\sf halts}\,(M\, \pi_1)
\end{stack}}
\]

\[
\infer[{\tt activePi2}]{\Gamma \vdash M\, \pi_2: {\sf partial}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf partial}\,A
\\
\Gamma ,x\mathord{:}A\vdash x\, \pi_2: {\sf partial}\,B
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt activePi2Seq}]{\Gamma \vdash M\, \pi_2= {\sf seq}\,\{x : M\}\,(x\, \pi_2): {\sf partial}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf partial}\,A
\\
\Gamma ,x\mathord{:}A\vdash x\, \pi_2: {\sf partial}\,B
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt pi2HaltsInv}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash {\sf halts}\,(M\, \pi_2)
\end{stack}}
\]

\[
\infer[{\tt prevHaltsInv}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash {\sf halts}\,(M\, {\sf prev})
\end{stack}}
\]

\[
\infer[{\tt activeCase}]{\Gamma \vdash {\sf sum_case}\,M\,(\lambda y.\,P)\,(\lambda y.\,R): {\sf partial}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf partial}\,A
\\
\Gamma ,x\mathord{:}A\vdash {\sf sum_case}\,x\,(\lambda y.\,P)\,(\lambda y.\,R): {\sf partial}\,B
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt activeCaseSeq}]{\Gamma \vdash {\sf sum_case}\,M\,(\lambda y.\,P)\,(\lambda y.\,R)= {\sf seq}\,\{x : M\}\,({\sf sum_case}\,x\,(\lambda y.\,P)\,(\lambda y.\,R)): {\sf partial}\,B}{
\begin{stack}
\Gamma \vdash M: {\sf partial}\,A
\\
\Gamma ,x\mathord{:}A\vdash {\sf sum_case}\,x\,(\lambda y.\,P)\,(\lambda y.\,R): {\sf partial}\,B
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt caseHaltsInv}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash {\sf halts}\,({\sf sum_case}\,M\,(\lambda y.\,P)\,(\lambda y.\,R))
\end{stack}}
\]

\[
\infer[{\tt seqHaltsSequal}]{\Gamma \vdash {\sf sequal}\,({\sf seq}\,\{x : M\}\,N)\,[M/x]N}{
\begin{stack}
\Gamma \vdash {\sf halts}\,M
\end{stack}}
\]

\[
\infer[{\tt seqHaltsInv}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash {\sf halts}\,({\sf seq}\,M\,N)
\end{stack}}
\]

\[
\infer[{\tt sequalUnderSeq}]{\Gamma \vdash {\sf sequal}\,({\sf seq}\,\{x : M\}\,N)\,[M'/x]N}{
\begin{stack}
\Gamma \vdash {\sf seq}\,\{x : M\}\,({\sf sequal}\,x\,M')
\end{stack}}
\]

\[
\infer[{\tt totalStrict}]{\Gamma \vdash {\sf subtype}\,A\,({\sf partial}\,A)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf halts}\,x
\end{stack}}
\]

\[
\infer[{\tt voidTotal'}]{\Gamma \vdash {\sf total}\,{\sf void}\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{}
\]

\[
\infer[{\tt voidStrict}]{\Gamma \vdash {\sf subtype}\,{\sf void}\,({\sf partial}\,{\sf void})}{}
\]

\[
\infer[{\tt unitTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf unit}
\end{stack}}
\]

\[
\infer[{\tt unitTotal'}]{\Gamma \vdash {\sf total}\,{\sf unit}\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{}
\]

\[
\infer[{\tt unitStrict}]{\Gamma \vdash {\sf subtype}\,{\sf unit}\,({\sf partial}\,{\sf unit})}{}
\]

\[
\infer[{\tt boolTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf bool}
\end{stack}}
\]

\[
\infer[{\tt boolTotal'}]{\Gamma \vdash {\sf total}\,{\sf bool}\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{}
\]

\[
\infer[{\tt boolStrict}]{\Gamma \vdash {\sf subtype}\,{\sf bool}\,({\sf partial}\,{\sf bool})}{}
\]

\[
\infer[{\tt forallTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf forall}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt forallTotal'}]{\Gamma \vdash {\sf total}\,({\sf forall}\,\{x : A\}\,B)\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt forallStrict}]{\Gamma \vdash {\sf subtype}\,({\sf forall}\,\{x : A\}\,B)\,({\sf partial}\,({\sf forall}\,\{x : A\}\,B))}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt arrowTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf arrow}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt arrowTotal'}]{\Gamma \vdash {\sf total}\,({\sf arrow}\,A\,B)\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt arrowStrict}]{\Gamma \vdash {\sf subtype}\,({\sf arrow}\,A\,B)\,({\sf partial}\,({\sf arrow}\,A\,B))}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt intersectStrict}]{\Gamma \vdash {\sf subtype}\,({\sf intersect}\,\{x : A\}\,B)\,({\sf partial}\,({\sf intersect}\,\{x : A\}\,B))}{
\begin{stack}
\Gamma \vdash A
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,({\sf partial}\,B)
\end{stack}}
\]

\[
\infer[{\tt existsTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf exists}\,\{x : A\}\,B
\end{stack}}
\]

\[
\infer[{\tt existsTotal'}]{\Gamma \vdash {\sf total}\,({\sf exists}\,\{x : A\}\,B)\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt existsStrict}]{\Gamma \vdash {\sf subtype}\,({\sf exists}\,\{x : A\}\,B)\,({\sf partial}\,({\sf exists}\,\{x : A\}\,B))}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt prodTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf prod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt prodTotal'}]{\Gamma \vdash {\sf total}\,({\sf prod}\,A\,B)\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt prodStrict}]{\Gamma \vdash {\sf subtype}\,({\sf prod}\,A\,B)\,({\sf partial}\,({\sf prod}\,A\,B))}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt dprodTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf dprod}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt dprodTotal'}]{\Gamma \vdash {\sf total}\,({\sf dprod}\,A\,B)\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt dprodStrict}]{\Gamma \vdash {\sf subtype}\,({\sf dprod}\,A\,B)\,({\sf partial}\,({\sf dprod}\,A\,B))}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt sumTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf sum}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt sumTotal'}]{\Gamma \vdash {\sf total}\,({\sf sum}\,A\,B)\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt sumStrict}]{\Gamma \vdash {\sf subtype}\,({\sf sum}\,A\,B)\,({\sf partial}\,({\sf sum}\,A\,B))}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt futureTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf future}\,A
\end{stack}}
\]

\[
\infer[{\tt futureTotal'}]{\Gamma \vdash {\sf total}\,({\sf future}\,A)\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt futureStrict}]{\Gamma \vdash {\sf subtype}\,({\sf future}\,A)\,({\sf partial}\,({\sf future}\,A))}{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt setTotal'}]{\Gamma \vdash {\sf total}\,({\sf set}\,\{x : A\}\,B)\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash {\sf total}\,A
\end{stack}}
\]

\[
\infer[{\tt setStrict}]{\Gamma \vdash {\sf subtype}\,({\sf set}\,\{x : A\}\,B)\,({\sf partial}\,({\sf set}\,\{x : A\}\,B))}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash {\sf subtype}\,A\,({\sf partial}\,A)
\end{stack}}
\]

\[
\infer[{\tt isetTotal'}]{\Gamma \vdash {\sf total}\,({\sf iset}\,\{x : A\}\,B)\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash {\sf total}\,A
\end{stack}}
\]

\[
\infer[{\tt isetStrict}]{\Gamma \vdash {\sf subtype}\,({\sf iset}\,\{x : A\}\,B)\,({\sf partial}\,({\sf iset}\,\{x : A\}\,B))}{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash {\sf subtype}\,A\,({\sf partial}\,A)
\end{stack}}
\]

\[
\infer[{\tt quotientTotal'}]{\Gamma \vdash {\sf total}\,({\sf quotient}\,\{x : A\}\,(\lambda y.\,B))\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf quotient}\,\{x : A\}\,(\lambda y.\,B): {\sf type}
\\
\Gamma ,x\mathord{:}A,y\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash {\sf total}\,A
\end{stack}}
\]

\[
\infer[{\tt natTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf nat}
\end{stack}}
\]

\[
\infer[{\tt natTotal'}]{\Gamma \vdash {\sf total}\,{\sf nat}\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{}
\]

\[
\infer[{\tt natStrict}]{\Gamma \vdash {\sf subtype}\,{\sf nat}\,({\sf partial}\,{\sf nat})}{}
\]

\[
\infer[{\tt typeHalts}]{\Gamma \vdash {\sf halts}\,A}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt univTotal'}]{\Gamma \vdash {\sf total}\,{\Bbb U}_{I}\:{\sf ext}\:\langle \star ,\lambda x.\,\star \rangle }{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt univStrict}]{\Gamma \vdash {\sf subtype}\,{\Bbb U}_{I}\,({\sf partial}\,{\Bbb U}_{I})}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt reduceSeqTotal}]{\Gamma \vdash {\sf sequal}\,({\sf seq}\,\{x : M\}\,N)\,[M/x]N}{
\begin{stack}
\Gamma \vdash M: A
\\
\Gamma \vdash {\sf total}\,A
\end{stack}}
\]

\[
\infer[{\tt haltsTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: A
\\
\Gamma \vdash {\sf total}\,A
\end{stack}}
\]

\[
\infer[{\tt uptypeForm}]{\Gamma \vdash {\sf uptype}\,A: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt uptypeEq}]{\Gamma \vdash {\sf uptype}\,A= {\sf uptype}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt uptypeFormUniv}]{\Gamma \vdash {\sf uptype}\,A: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt uptypeEqUniv}]{\Gamma \vdash {\sf uptype}\,A= {\sf uptype}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt uptypeTrivialize}]{\Gamma \vdash {\sf uptype}\,A}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A
\end{stack}}
\]

\[
\infer[{\tt uptypeExt}]{\Gamma \vdash M= N: {\sf uptype}\,A}{
\begin{stack}
\Gamma \vdash M: {\sf uptype}\,A
\\
\Gamma \vdash N: {\sf uptype}\,A
\end{stack}}
\]

\[
\infer[{\tt uptypeLeft}]{\Gamma_1 ,x\mathord{:}({\sf uptype}\,A), \Gamma_2 \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 , [\star /x]\Gamma_2\vdash [\star /x]B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt uptypeEeqtp}]{\Gamma \vdash {\sf uptype}\,B}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A
\\
\Gamma \vdash {\sf eeqtp}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt uptypeUnitary}]{\Gamma \vdash {\sf uptype}\,A}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,{\sf unit}
\end{stack}}
\]

\[
\infer[{\tt voidUptype}]{\Gamma \vdash {\sf uptype}\,{\sf void}}{}
\]

\[
\infer[{\tt unitUptype}]{\Gamma \vdash {\sf uptype}\,{\sf unit}}{}
\]

\[
\infer[{\tt boolUptype}]{\Gamma \vdash {\sf uptype}\,{\sf bool}}{}
\]

\[
\infer[{\tt forallUptype}]{\Gamma \vdash {\sf uptype}\,({\sf forall}\,\{x : A\}\,B)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf uptype}\,B
\end{stack}}
\]

\[
\infer[{\tt arrowUptype}]{\Gamma \vdash {\sf uptype}\,({\sf arrow}\,A\,B)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf uptype}\,B
\end{stack}}
\]

\[
\infer[{\tt intersectUptype}]{\Gamma \vdash {\sf uptype}\,({\sf intersect}\,\{x : A\}\,B)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf uptype}\,B
\end{stack}}
\]

\[
\infer[{\tt existsUptype}]{\Gamma \vdash {\sf uptype}\,({\sf exists}\,\{x : A\}\,B)}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A
\\
\Gamma ,x\mathord{:}A\vdash {\sf uptype}\,B
\end{stack}}
\]

\[
\infer[{\tt prodUptype}]{\Gamma \vdash {\sf uptype}\,({\sf prod}\,A\,B)}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A
\\
\Gamma \vdash {\sf uptype}\,B
\end{stack}}
\]

\[
\infer[{\tt dprodUptype}]{\Gamma \vdash {\sf uptype}\,({\sf dprod}\,A\,B)}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A
\\
\Gamma ,x\mathord{:}A\vdash {\sf uptype}\,B
\end{stack}}
\]

\[
\infer[{\tt sumUptype}]{\Gamma \vdash {\sf uptype}\,({\sf sum}\,A\,B)}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A
\\
\Gamma \vdash {\sf uptype}\,B
\end{stack}}
\]

\[
\infer[{\tt futureUptype}]{\Gamma \vdash {\sf uptype}\,({\sf future}\,A)}{
\begin{stack}
\overline{\Gamma}\vdash {\sf uptype}\,A
\end{stack}}
\]

\[
\infer[{\tt eqUptype}]{\Gamma \vdash {\sf uptype}\,(M= N: A)}{
\begin{stack}
\Gamma \vdash M: A
\\
\Gamma \vdash N: A
\end{stack}}
\]

\[
\infer[{\tt ofUptype}]{\Gamma \vdash {\sf uptype}\,(M: A)}{
\begin{stack}
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt eqtpUptype}]{\Gamma \vdash {\sf uptype}\,(A= B: {\sf type})}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt istpUptype}]{\Gamma \vdash {\sf uptype}\,(A: {\sf type})}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt subtypeUptype}]{\Gamma \vdash {\sf uptype}\,({\sf subtype}\,A\,B)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt setUptype}]{\Gamma \vdash {\sf uptype}\,({\sf set}\,\{x : A\}\,B)}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt isetUptype}]{\Gamma \vdash {\sf uptype}\,({\sf iset}\,\{x : A\}\,B)}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt muUptype}]{\Gamma \vdash {\sf uptype}\,({\sf mu}\,(\lambda t.\,A))}{
\begin{stack}
\Gamma ,t\mathord{:}{\sf type}\vdash A: {\sf type}
\\
\Gamma ,t\mathord{:}{\sf type},x\mathord{:}({\sf uptype}\,t)\vdash {\sf uptype}\,A
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,A)
\end{stack}}
\]

\[
\infer[{\tt muUptypeUniv}]{\Gamma \vdash {\sf uptype}\,({\sf mu}\,(\lambda t.\,A))}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,t\mathord{:}{\Bbb U}_{I}\vdash A: {\Bbb U}_{I}
\\
\Gamma ,t\mathord{:}{\Bbb U}_{I},x\mathord{:}({\sf uptype}\,t)\vdash {\sf uptype}\,A
\\
\Gamma \vdash {\sf positive}\,(\lambda t.\,A)
\end{stack}}
\]

\[
\infer[{\tt recUptype}]{\Gamma \vdash {\sf uptype}\,({\sf rec}\,(\lambda t.\,A))}{
\begin{stack}
\Gamma ,t\mathord{:}\underline{\sf type}\vdash A: {\sf type}
\\
\Gamma ,t\mathord{:}\underline{\sf type},x\mathord{:}\underline{({\sf uptype}\,t)}\vdash {\sf uptype}\,A
\end{stack}}
\]

\[
\infer[{\tt recUptypeUniv}]{\Gamma \vdash {\sf uptype}\,({\sf rec}\,(\lambda t.\,A))}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,t\mathord{:}\underline{{\Bbb U}_{I}}\vdash A: {\Bbb U}_{I}
\\
\Gamma ,t\mathord{:}\underline{{\Bbb U}_{I}},x\mathord{:}\underline{({\sf uptype}\,t)}\vdash {\sf uptype}\,A
\end{stack}}
\]

\[
\infer[{\tt natUptype}]{\Gamma \vdash {\sf uptype}\,{\sf nat}}{}
\]

\[
\infer[{\tt uptypeFormInv}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt admissForm}]{\Gamma \vdash {\sf admiss}\,A: {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt admissEq}]{\Gamma \vdash {\sf admiss}\,A= {\sf admiss}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt admissFormUniv}]{\Gamma \vdash {\sf admiss}\,A: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt admissEqUniv}]{\Gamma \vdash {\sf admiss}\,A= {\sf admiss}\,B: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash A= B: {\Bbb U}_{I}
\end{stack}}
\]

\[
\infer[{\tt admissTrivialize}]{\Gamma \vdash {\sf admiss}\,A}{
\begin{stack}
\Gamma \vdash {\sf admiss}\,A
\end{stack}}
\]

\[
\infer[{\tt admissExt}]{\Gamma \vdash M= N: {\sf admiss}\,A}{
\begin{stack}
\Gamma \vdash M: {\sf admiss}\,A
\\
\Gamma \vdash N: {\sf admiss}\,A
\end{stack}}
\]

\[
\infer[{\tt admissLeft}]{\Gamma_1 ,x\mathord{:}({\sf admiss}\,A), \Gamma_2 \vdash B\:{\sf ext}\:M}{
\begin{stack}
\Gamma_1 , [\star /x]\Gamma_2\vdash [\star /x]B\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt admissEeqtp}]{\Gamma \vdash {\sf admiss}\,B}{
\begin{stack}
\Gamma \vdash {\sf admiss}\,A
\\
\Gamma \vdash {\sf eeqtp}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt uptypeAdmiss}]{\Gamma \vdash {\sf admiss}\,A}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A
\end{stack}}
\]

\[
\infer[{\tt partialAdmiss}]{\Gamma \vdash {\sf admiss}\,({\sf partial}\,A)}{
\begin{stack}
\Gamma \vdash {\sf admiss}\,A
\end{stack}}
\]

\[
\infer[{\tt voidAdmiss}]{\Gamma \vdash {\sf admiss}\,{\sf void}}{}
\]

\[
\infer[{\tt unitAdmiss}]{\Gamma \vdash {\sf admiss}\,{\sf unit}}{}
\]

\[
\infer[{\tt boolAdmiss}]{\Gamma \vdash {\sf admiss}\,{\sf bool}}{}
\]

\[
\infer[{\tt forallAdmiss}]{\Gamma \vdash {\sf admiss}\,({\sf forall}\,\{x : A\}\,B)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf admiss}\,B
\end{stack}}
\]

\[
\infer[{\tt arrowAdmiss}]{\Gamma \vdash {\sf admiss}\,({\sf arrow}\,A\,B)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf admiss}\,B
\end{stack}}
\]

\[
\infer[{\tt intersectAdmiss}]{\Gamma \vdash {\sf admiss}\,({\sf intersect}\,\{x : A\}\,B)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf admiss}\,B
\end{stack}}
\]

\[
\infer[{\tt existsAdmissUptype}]{\Gamma \vdash {\sf admiss}\,({\sf exists}\,\{x : A\}\,B)}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A
\\
\Gamma ,x\mathord{:}A\vdash {\sf admiss}\,B
\end{stack}}
\]

\[
\infer[{\tt prodAdmiss}]{\Gamma \vdash {\sf admiss}\,({\sf prod}\,A\,B)}{
\begin{stack}
\Gamma \vdash {\sf admiss}\,A
\\
\Gamma \vdash {\sf admiss}\,B
\end{stack}}
\]

\[
\infer[{\tt dprodAdmissUptype}]{\Gamma \vdash {\sf admiss}\,({\sf dprod}\,A\,B)}{
\begin{stack}
\Gamma \vdash {\sf uptype}\,A
\\
\Gamma ,x\mathord{:}A\vdash {\sf admiss}\,B
\end{stack}}
\]

\[
\infer[{\tt sumAdmiss}]{\Gamma \vdash {\sf admiss}\,({\sf sum}\,A\,B)}{
\begin{stack}
\Gamma \vdash {\sf admiss}\,A
\\
\Gamma \vdash {\sf admiss}\,B
\end{stack}}
\]

\[
\infer[{\tt futureAdmiss}]{\Gamma \vdash {\sf admiss}\,({\sf future}\,A)}{
\begin{stack}
\overline{\Gamma}\vdash {\sf admiss}\,A
\end{stack}}
\]

\[
\infer[{\tt eqAdmiss}]{\Gamma \vdash {\sf admiss}\,(M= N: A)}{
\begin{stack}
\Gamma \vdash M: A
\\
\Gamma \vdash N: A
\end{stack}}
\]

\[
\infer[{\tt ofAdmiss}]{\Gamma \vdash {\sf admiss}\,(M: A)}{
\begin{stack}
\Gamma \vdash M: A
\end{stack}}
\]

\[
\infer[{\tt eqtpAdmiss}]{\Gamma \vdash {\sf admiss}\,(A= B: {\sf type})}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt istpAdmiss}]{\Gamma \vdash {\sf admiss}\,(A: {\sf type})}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt subtypeAdmiss}]{\Gamma \vdash {\sf admiss}\,({\sf subtype}\,A\,B)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt recAdmiss}]{\Gamma \vdash {\sf admiss}\,({\sf rec}\,(\lambda t.\,A))}{
\begin{stack}
\Gamma ,t\mathord{:}\underline{\sf type}\vdash A: {\sf type}
\\
\Gamma ,t\mathord{:}\underline{\sf type},x\mathord{:}\underline{({\sf admiss}\,t)}\vdash {\sf admiss}\,A
\end{stack}}
\]

\[
\infer[{\tt recAdmissUniv}]{\Gamma \vdash {\sf admiss}\,({\sf rec}\,(\lambda t.\,A))}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\\
\Gamma ,t\mathord{:}\underline{{\Bbb U}_{I}}\vdash A: {\Bbb U}_{I}
\\
\Gamma ,t\mathord{:}\underline{{\Bbb U}_{I}},x\mathord{:}\underline{({\sf admiss}\,t)}\vdash {\sf admiss}\,A
\end{stack}}
\]

\[
\infer[{\tt natAdmiss}]{\Gamma \vdash {\sf admiss}\,{\sf nat}}{}
\]

\[
\infer[{\tt admissFormInv}]{\Gamma \vdash A: {\sf type}}{
\begin{stack}
\Gamma \vdash {\sf admiss}\,A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt partialType}]{\Gamma \vdash {\sf partial}: {\sf intersect}\,\{i : {\sf level}\}\,({\sf arrow}\,{\Bbb U}_{i}\,{\Bbb U}_{i})}{}
\]

\[
\infer[{\tt haltsType}]{\Gamma \vdash {\sf halts}: {\sf intersect}\,\{i : {\sf level}\}\,({\sf intersect}\,\{a : {\Bbb U}_{i}\}\,({\sf arrow}\,({\sf partial}\,a)\,{\Bbb U}_{{\sf lzero}}))}{}
\]

\[
\infer[{\tt admissType}]{\Gamma \vdash {\sf admiss}: {\sf intersect}\,\{i : {\sf level}\}\,({\sf arrow}\,{\Bbb U}_{i}\,{\Bbb U}_{i})}{}
\]

\[
\infer[{\tt uptypeType}]{\Gamma \vdash {\sf uptype}: {\sf intersect}\,\{i : {\sf level}\}\,({\sf arrow}\,{\Bbb U}_{i}\,{\Bbb U}_{i})}{}
\]

\[
\infer[{\tt seqType}]{\Gamma \vdash {\sf seq}: {\sf intersect}\,\{i : {\sf level}\}\,({\sf intersect}\,\{a : {\Bbb U}_{i}\}\,({\sf intersect}\,\{b : {\Bbb U}_{i}\}\,({\sf arrow}\,({\sf partial}\,a)\,({\sf arrow}\,({\sf arrow}\,a\,({\sf partial}\,b))\,({\sf partial}\,b)))))}{}
\]

\[
\infer[{\tt eeqtpRefl}]{\Gamma \vdash {\sf eeqtp}\,A\,A\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt eeqtpSymm}]{\Gamma \vdash {\sf eeqtp}\,A\,B\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,B\,A
\end{stack}}
\]

\[
\infer[{\tt eeqtpTrans}]{\Gamma \vdash {\sf eeqtp}\,A\,C\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,B
\\
\Gamma \vdash {\sf eeqtp}\,B\,C
\end{stack}}
\]

\[
\infer[{\tt weakenEqtpEeqtp}]{\Gamma \vdash {\sf eeqtp}\,A\,B\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash A= B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt weakenSubtypeArrow}]{\Gamma \vdash {\sf arrow}\,A\,B\:{\sf ext}\:\lambda x.\,x}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt weakenEeqtpIff}]{\Gamma \vdash {\sf iff}\,A\,B\:{\sf ext}\:\langle \lambda x.\,x,\lambda x.\,x\rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,B
\end{stack}}
\]

\[
\infer[{\tt compatGuardEqtp1}]{\Gamma \vdash {\sf guard}\,A\,B= {\sf guard}\,A\,B': {\sf type}}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B= B': {\sf type}
\end{stack}}
\]

\[
\infer[{\tt compatSetEqtp0}]{\Gamma \vdash {\sf set}\,\{x : A\}\,B= {\sf set}\,\{x : A'\}\,B: {\sf type}}{
\begin{stack}
\Gamma \vdash A= A': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt forallEeq}]{\Gamma \vdash {\sf eeqtp}\,({\sf forall}\,\{x : A\}\,B)\,({\sf forall}\,\{x : A'\}\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf eeqtp}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt existsEeq}]{\Gamma \vdash {\sf eeqtp}\,({\sf exists}\,\{x : A\}\,B)\,({\sf exists}\,\{x : A'\}\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf eeqtp}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt arrowEeq}]{\Gamma \vdash {\sf eeqtp}\,({\sf arrow}\,A\,B)\,({\sf arrow}\,A'\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,A'
\\
\Gamma \vdash {\sf eeqtp}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt prodEeq}]{\Gamma \vdash {\sf eeqtp}\,({\sf prod}\,A\,B)\,({\sf prod}\,A'\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,A'
\\
\Gamma \vdash {\sf eeqtp}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt dprodEeq}]{\Gamma \vdash {\sf eeqtp}\,({\sf dprod}\,A\,B)\,({\sf dprod}\,A'\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf eeqtp}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt sumEeq}]{\Gamma \vdash {\sf eeqtp}\,({\sf sum}\,A\,B)\,({\sf sum}\,A'\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,A'
\\
\Gamma \vdash {\sf eeqtp}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt futureEeq}]{\Gamma \vdash {\sf eeqtp}\,({\sf future}\,A)\,({\sf future}\,A')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\overline{\Gamma}\vdash {\sf eeqtp}\,A\,A'
\end{stack}}
\]

\[
\infer[{\tt letnextEeq}]{\Gamma \vdash {\sf eeqtp}\,({\sf letnext}\,\{x : M\}\,B)\,({\sf letnext}\,\{x : M\}\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\overline{\Gamma}\vdash A: {\sf type}
\\
\Gamma \vdash M: {\sf future}\,A
\\
\Gamma ,x\mathord{:}\underline{A}\vdash {\sf eeqtp}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt intersectEeq}]{\Gamma \vdash {\sf eeqtp}\,({\sf intersect}\,\{x : A\}\,B)\,({\sf intersect}\,\{x : A'\}\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf eeqtp}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt unionEeq}]{\Gamma \vdash {\sf eeqtp}\,({\sf union}\,\{x : A\}\,B)\,({\sf union}\,\{x : A'\}\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash {\sf eeqtp}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt eeqEeq}]{\Gamma \vdash {\sf eeqtp}\,({\sf eeqtp}\,A\,B)\,({\sf eeqtp}\,A'\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,A'
\\
\Gamma \vdash {\sf eeqtp}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt compatGuardEeq1}]{\Gamma \vdash {\sf eeqtp}\,({\sf guard}\,A\,B)\,({\sf guard}\,A\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf eeqtp}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt compatSetEeq0}]{\Gamma \vdash {\sf eeqtp}\,({\sf set}\,\{x : A\}\,B)\,({\sf set}\,\{x : A'\}\,B)\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt compatIsetEeq0}]{\Gamma \vdash {\sf eeqtp}\,({\sf iset}\,\{x : A\}\,B)\,({\sf iset}\,\{x : A'\}\,B)\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash {\sf eeqtp}\,A\,A'
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt compatIsetIff1}]{\Gamma \vdash {\sf eeqtp}\,({\sf iset}\,\{x : A\}\,B)\,({\sf iset}\,\{x : A\}\,B')\:{\sf ext}\:\langle \star ,\star \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf iff}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt compatForallSubtype0}]{\Gamma \vdash {\sf subtype}\,({\sf forall}\,\{x : A\}\,B)\,({\sf forall}\,\{x : A'\}\,B)}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A'\,A
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt compatForallSubtype1}]{\Gamma \vdash {\sf subtype}\,({\sf forall}\,\{x : A\}\,B)\,({\sf forall}\,\{x : A\}\,B')}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt compatExistsSubtype0}]{\Gamma \vdash {\sf subtype}\,({\sf exists}\,\{x : A\}\,B)\,({\sf exists}\,\{x : A'\}\,B)}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A'\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt compatExistsSubtype1}]{\Gamma \vdash {\sf subtype}\,({\sf exists}\,\{x : A\}\,B)\,({\sf exists}\,\{x : A\}\,B')}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt compatIntersectSubtype0}]{\Gamma \vdash {\sf subtype}\,({\sf intersect}\,\{x : A\}\,B)\,({\sf intersect}\,\{x : A'\}\,B)}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A'\,A
\\
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt compatIntersectSubtype1}]{\Gamma \vdash {\sf subtype}\,({\sf intersect}\,\{x : A\}\,B)\,({\sf intersect}\,\{x : A\}\,B')}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt compatUnionSubtype0}]{\Gamma \vdash {\sf subtype}\,({\sf union}\,\{x : A\}\,B)\,({\sf union}\,\{x : A'\}\,B)}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A'\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt compatUnionSubtype1}]{\Gamma \vdash {\sf subtype}\,({\sf union}\,\{x : A\}\,B)\,({\sf union}\,\{x : A\}\,B')}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf subtype}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt compatGuardArrow0}]{\Gamma \vdash {\sf subtype}\,({\sf guard}\,A\,B)\,({\sf guard}\,A'\,B)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash {\sf arrow}\,A'\,A
\end{stack}}
\]

\[
\infer[{\tt compatGuardSubtype1}]{\Gamma \vdash {\sf subtype}\,({\sf guard}\,A\,B)\,({\sf guard}\,A\,B')}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf subtype}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt compatSetSubtype0}]{\Gamma \vdash {\sf subtype}\,({\sf set}\,\{x : A\}\,B)\,({\sf set}\,\{x : A'\}\,B)}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A'\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt compatSetArrow1}]{\Gamma \vdash {\sf subtype}\,({\sf set}\,\{x : A\}\,B)\,({\sf set}\,\{x : A\}\,B')}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf arrow}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt compatIsetSubtype0}]{\Gamma \vdash {\sf subtype}\,({\sf iset}\,\{x : A\}\,B)\,({\sf iset}\,\{x : A'\}\,B)}{
\begin{stack}
\Gamma \vdash {\sf subtype}\,A\,A'
\\
\Gamma ,x\mathord{:}A'\vdash B: {\sf type}
\end{stack}}
\]

\[
\infer[{\tt compatIsetArrow1}]{\Gamma \vdash {\sf subtype}\,({\sf iset}\,\{x : A\}\,B)\,({\sf iset}\,\{x : A\}\,B')}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf arrow}\,B\,B'
\end{stack}}
\]

\[
\infer[{\tt compatForallIff1}]{\Gamma \vdash {\sf iff}\,({\sf forall}\,\{x : A\}\,B)\,({\sf forall}\,\{x : A\}\,B')\:{\sf ext}\:\langle \lambda f.\,\lambda x.\,M\, \pi_1\,(f\,x),\lambda f.\,\lambda x.\,M\, \pi_2\,(f\,x)\rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf iff}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatExistsIff1}]{\Gamma \vdash {\sf iff}\,({\sf exists}\,\{x : A\}\,B)\,({\sf exists}\,\{x : A\}\,B')\:{\sf ext}\:\langle \lambda p.\,\langle p\, \pi_1,[p\, \pi_1/x]M\, \pi_1\,(p\, \pi_2)\rangle ,\lambda p.\,\langle p\, \pi_1,[p\, \pi_1/x]M\, \pi_2\,(p\, \pi_2)\rangle \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf iff}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatArrowIff0}]{\Gamma \vdash {\sf iff}\,({\sf arrow}\,A\,B)\,({\sf arrow}\,A'\,B)\:{\sf ext}\:\langle \lambda f.\,\lambda x.\,f\,(M\, \pi_2\,x),\lambda f.\,\lambda x.\,f\,(M\, \pi_1\,x)\rangle }{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash {\sf iff}\,A\,A'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatArrowIff1}]{\Gamma \vdash {\sf iff}\,({\sf arrow}\,A\,B)\,({\sf arrow}\,A\,B')\:{\sf ext}\:\langle \lambda f.\,\lambda x.\,M\, \pi_1\,(f\,x),\lambda f.\,\lambda x.\,M\, \pi_2\,(f\,x)\rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf iff}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatProdIff0}]{\Gamma \vdash {\sf iff}\,({\sf prod}\,A\,B)\,({\sf prod}\,A'\,B)\:{\sf ext}\:\langle \lambda x.\,\langle M\, \pi_1\,(x\, \pi_1),x\, \pi_2\rangle ,\lambda x.\,\langle M\, \pi_2\,(x\, \pi_1),x\, \pi_2\rangle \rangle }{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash {\sf iff}\,A\,A'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatProdIff1}]{\Gamma \vdash {\sf iff}\,({\sf prod}\,A\,B)\,({\sf prod}\,A\,B')\:{\sf ext}\:\langle \lambda x.\,\langle x\, \pi_1,M\, \pi_1\,(x\, \pi_2)\rangle ,\lambda x.\,\langle x\, \pi_1,M\, \pi_2\,(x\, \pi_2)\rangle \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf iff}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatDprodIff0}]{\Gamma \vdash {\sf iff}\,({\sf dprod}\,A\,B)\,({\sf dprod}\,A'\,B)\:{\sf ext}\:\langle \lambda x.\,\langle M\, \pi_1\,(x\, \pi_1),x\, \pi_2\rangle ,\lambda x.\,\langle M\, \pi_2\,(x\, \pi_1),x\, \pi_2\rangle \rangle }{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash B: {\sf type}
\\
\Gamma \vdash {\sf iff}\,A\,A'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatDprodIff1}]{\Gamma \vdash {\sf iff}\,({\sf dprod}\,A\,B)\,({\sf dprod}\,A\,B')\:{\sf ext}\:\langle \lambda x.\,\langle x\, \pi_1,M\, \pi_1\,(x\, \pi_2)\rangle ,\lambda x.\,\langle x\, \pi_1,M\, \pi_2\,(x\, \pi_2)\rangle \rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf iff}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatSumIff0}]{\Gamma \vdash {\sf iff}\,({\sf sum}\,A\,B)\,({\sf sum}\,A'\,B)\:{\sf ext}\:\langle \lambda x.\,{\sf sum_case}\,x\,(\lambda y.\,{\sf inl}\,(M\, \pi_1\,y))\,(\lambda y.\,{\sf inr}\,y),\lambda x.\,{\sf sum_case}\,x\,(\lambda y.\,{\sf inl}\,(M\, \pi_2\,y))\,(\lambda y.\,{\sf inr}\,y)\rangle }{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash {\sf iff}\,A\,A'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatSumIff1}]{\Gamma \vdash {\sf iff}\,({\sf sum}\,A\,B)\,({\sf sum}\,A\,B')\:{\sf ext}\:\langle \lambda x.\,{\sf sum_case}\,x\,(\lambda y.\,{\sf inl}\,y)\,(\lambda y.\,{\sf inr}\,(M\, \pi_1\,y)),\lambda x.\,{\sf sum_case}\,x\,(\lambda y.\,{\sf inl}\,y)\,(\lambda y.\,{\sf inr}\,(M\, \pi_2\,y))\rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf iff}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatFutureIff}]{\Gamma \vdash {\sf iff}\,({\sf future}\,A)\,({\sf future}\,A')\:{\sf ext}\:\langle \lambda x.\,{\sf letnext}\,\{y : x\}\,({\sf next}\,(M\, \pi_1\,y)),\lambda x.\,{\sf letnext}\,\{y : x\}\,({\sf next}\,(M\, \pi_2\,y))\rangle }{
\begin{stack}
\overline{\Gamma}\vdash {\sf iff}\,A\,A'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatForallArrow1}]{\Gamma \vdash {\sf arrow}\,({\sf forall}\,\{x : A\}\,B)\,({\sf forall}\,\{x : A\}\,B')\:{\sf ext}\:\lambda f.\,\lambda x.\,M\,(f\,x)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf arrow}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatExistsArrow1}]{\Gamma \vdash {\sf arrow}\,({\sf exists}\,\{x : A\}\,B)\,({\sf exists}\,\{x : A\}\,B')\:{\sf ext}\:\lambda p.\,\langle p\, \pi_1,[p\, \pi_1/x]M\,(p\, \pi_2)\rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash B': {\sf type}
\\
\Gamma ,x\mathord{:}A\vdash {\sf arrow}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatArrowArrow0}]{\Gamma \vdash {\sf arrow}\,({\sf arrow}\,A\,B)\,({\sf arrow}\,A'\,B)\:{\sf ext}\:\lambda f.\,\lambda x.\,f\,(M\,x)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash {\sf arrow}\,A'\,A\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatArrowArrow1}]{\Gamma \vdash {\sf arrow}\,({\sf arrow}\,A\,B)\,({\sf arrow}\,A\,B')\:{\sf ext}\:\lambda f.\,\lambda x.\,M\,(f\,x)}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf arrow}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatProdArrow0}]{\Gamma \vdash {\sf arrow}\,({\sf prod}\,A\,B)\,({\sf prod}\,A'\,B)\:{\sf ext}\:\lambda x.\,\langle M\,(x\, \pi_1),x\, \pi_2\rangle }{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash {\sf arrow}\,A\,A'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatProdArrow1}]{\Gamma \vdash {\sf arrow}\,({\sf prod}\,A\,B)\,({\sf prod}\,A\,B')\:{\sf ext}\:\lambda x.\,\langle x\, \pi_1,M\,(x\, \pi_2)\rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf arrow}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatDprodArrow0}]{\Gamma \vdash {\sf arrow}\,({\sf dprod}\,A\,B)\,({\sf dprod}\,A'\,B)\:{\sf ext}\:\lambda x.\,\langle M\,(x\, \pi_1),x\, \pi_2\rangle }{
\begin{stack}
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash {\sf arrow}\,A\,A'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatDprodArrow1}]{\Gamma \vdash {\sf arrow}\,({\sf dprod}\,A\,B)\,({\sf dprod}\,A\,B')\:{\sf ext}\:\lambda x.\,\langle x\, \pi_1,M\,(x\, \pi_2)\rangle }{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash {\sf arrow}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatSumArrow0}]{\Gamma \vdash {\sf arrow}\,({\sf sum}\,A\,B)\,({\sf sum}\,A'\,B)\:{\sf ext}\:\lambda x.\,{\sf sum_case}\,x\,(\lambda y.\,{\sf inl}\,(M\,y))\,(\lambda y.\,{\sf inr}\,y)}{
\begin{stack}
\Gamma \vdash A': {\sf type}
\\
\Gamma \vdash B: {\sf type}
\\
\Gamma \vdash {\sf arrow}\,A\,A'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatSumArrow1}]{\Gamma \vdash {\sf arrow}\,({\sf sum}\,A\,B)\,({\sf sum}\,A\,B')\:{\sf ext}\:\lambda x.\,{\sf sum_case}\,x\,(\lambda y.\,{\sf inl}\,y)\,(\lambda y.\,{\sf inr}\,(M\,y))}{
\begin{stack}
\Gamma \vdash A: {\sf type}
\\
\Gamma \vdash B': {\sf type}
\\
\Gamma \vdash {\sf arrow}\,B\,B'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatFutureArrow}]{\Gamma \vdash {\sf arrow}\,({\sf future}\,A)\,({\sf future}\,A')\:{\sf ext}\:\lambda x.\,{\sf letnext}\,\{y : x\}\,({\sf next}\,(M\,y))}{
\begin{stack}
\overline{\Gamma}\vdash {\sf arrow}\,A\,A'\:{\sf ext}\:M
\end{stack}}
\]

\[
\infer[{\tt compatForallEntails1}]{\Gamma \vdash {\sf forall}\,\{x : A\}\,B'\:{\sf ext}\:\lambda x.\,[F\,x/y]M}{
\begin{stack}
\Gamma ,x\mathord{:}A,y\mathord{:}B\vdash B'\:{\sf ext}\:M
\\
\Gamma \vdash {\sf forall}\,\{x : A\}\,B\:{\sf ext}\:F
\end{stack}}
\]

\[
\infer[{\tt compatArrowEntails1}]{\Gamma \vdash {\sf arrow}\,A\,B'\:{\sf ext}\:\lambda x.\,[F\,x/y]M}{
\begin{stack}
\Gamma ,y\mathord{:}B\vdash B'\:{\sf ext}\:M
\\
\Gamma \vdash {\sf arrow}\,A\,B\:{\sf ext}\:F
\end{stack}}
\]

\[
\infer[{\tt compatProdEntails0}]{\Gamma \vdash {\sf prod}\,A'\,B\:{\sf ext}\:\langle [P\, \pi_1/x]M,P\, \pi_2\rangle }{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash A'\:{\sf ext}\:M
\\
\Gamma \vdash {\sf prod}\,A\,B\:{\sf ext}\:P
\end{stack}}
\]

\[
\infer[{\tt compatProdEntails1}]{\Gamma \vdash {\sf prod}\,A\,B'\:{\sf ext}\:\langle P\, \pi_1,[P\, \pi_2/x]M\rangle }{
\begin{stack}
\Gamma ,x\mathord{:}B\vdash B'\:{\sf ext}\:M
\\
\Gamma \vdash {\sf prod}\,A\,B\:{\sf ext}\:P
\end{stack}}
\]

\[
\infer[{\tt compatDprodEntails0}]{\Gamma \vdash {\sf dprod}\,A'\,B\:{\sf ext}\:\langle [P\, \pi_1/x]M,P\, \pi_2\rangle }{
\begin{stack}
\Gamma ,x\mathord{:}A\vdash A'\:{\sf ext}\:M
\\
\Gamma \vdash {\sf dprod}\,A\,B\:{\sf ext}\:P
\end{stack}}
\]

\[
\infer[{\tt compatDprodEntails1}]{\Gamma \vdash {\sf dprod}\,A\,B'\:{\sf ext}\:\langle P\, \pi_1,[P\, \pi_2/y]M\rangle }{
\begin{stack}
\Gamma ,y\mathord{:}B\vdash B'\:{\sf ext}\:M
\\
\Gamma \vdash {\sf dprod}\,A\,B\:{\sf ext}\:P
\end{stack}}
\]

\[
\infer[{\tt integerForm}]{\Gamma \vdash {\sf integer}: {\sf type}}{}
\]

\[
\infer[{\tt integerEq}]{\Gamma \vdash {\sf integer}= {\sf integer}: {\sf type}}{}
\]

\[
\infer[{\tt integerFormUniv}]{\Gamma \vdash {\sf integer}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt integerEqUniv}]{\Gamma \vdash {\sf integer}= {\sf integer}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt integerToDefType}]{\Gamma \vdash {\sf integer_to_Integer}: {\sf arrow}\,{\sf integer}\,{\sf cInteger}}{}
\]

\[
\infer[{\tt integerFromDefType}]{\Gamma \vdash {\sf integer_from_Integer}: {\sf arrow}\,{\sf cInteger}\,{\sf integer}}{}
\]

\[
\infer[{\tt integerIsomorphism1}]{\Gamma \vdash (\lambda x.\,{\sf integer_from_Integer}\,({\sf integer_to_Integer}\,x))= (\lambda x.\,x): {\sf arrow}\,{\sf integer}\,{\sf integer}}{}
\]

\[
\infer[{\tt integerIsomorphism2}]{\Gamma \vdash (\lambda x.\,{\sf integer_to_Integer}\,({\sf integer_from_Integer}\,x))= (\lambda x.\,x): {\sf arrow}\,{\sf cInteger}\,{\sf cInteger}}{}
\]

\[
\infer[{\tt pluszSpec}]{\Gamma \vdash {\sf plusz}= (\lambda x.\,\lambda y.\,{\sf integer_from_Integer}\,({\sf cPlusz}\,({\sf integer_to_Integer}\,x)\,({\sf integer_to_Integer}\,y))): {\sf arrow}\,{\sf integer}\,({\sf arrow}\,{\sf integer}\,{\sf integer})}{}
\]

\[
\infer[{\tt negzSpec}]{\Gamma \vdash {\sf negz}= (\lambda x.\,{\sf integer_from_Integer}\,({\sf cNegz}\,({\sf integer_to_Integer}\,x))): {\sf arrow}\,{\sf integer}\,{\sf integer}}{}
\]

\[
\infer[{\tt eqzbSpec}]{\Gamma \vdash {\sf eqzb}= (\lambda x.\,\lambda y.\,{\sf cEqzb}\,({\sf integer_to_Integer}\,x)\,({\sf integer_to_Integer}\,y)): {\sf arrow}\,{\sf integer}\,({\sf arrow}\,{\sf integer}\,{\sf bool})}{}
\]

\[
\infer[{\tt leqzbSpec}]{\Gamma \vdash {\sf leqzb}= (\lambda x.\,\lambda y.\,{\sf cLeqzb}\,({\sf integer_to_Integer}\,x)\,({\sf integer_to_Integer}\,y)): {\sf arrow}\,{\sf integer}\,({\sf arrow}\,{\sf integer}\,{\sf bool})}{}
\]

\[
\infer[{\tt timeszSpec}]{\Gamma \vdash {\sf timesz}= (\lambda x.\,\lambda y.\,{\sf integer_from_Integer}\,({\sf cTimesz}\,({\sf integer_to_Integer}\,x)\,({\sf integer_to_Integer}\,y))): {\sf arrow}\,{\sf integer}\,({\sf arrow}\,{\sf integer}\,{\sf integer})}{}
\]

\[
\infer[{\tt integerTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf integer}
\end{stack}}
\]

\[
\infer[{\tt integerStrict}]{\Gamma \vdash {\sf subtype}\,{\sf integer}\,({\sf partial}\,{\sf integer})}{}
\]

\[
\infer[{\tt integerUptype}]{\Gamma \vdash {\sf uptype}\,{\sf integer}}{}
\]

\[
\infer[{\tt integerAdmiss}]{\Gamma \vdash {\sf admiss}\,{\sf integer}}{}
\]

\[
\infer[{\tt integerSequal}]{\Gamma \vdash {\sf sequal}\,M\,N}{
\begin{stack}
\Gamma \vdash M= N: {\sf integer}
\end{stack}}
\]

\[
\infer[{\tt symbolForm}]{\Gamma \vdash {\sf symbol}: {\sf type}}{}
\]

\[
\infer[{\tt symbolEq}]{\Gamma \vdash {\sf symbol}= {\sf symbol}: {\sf type}}{}
\]

\[
\infer[{\tt symbolFormUniv}]{\Gamma \vdash {\sf symbol}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt symbolEqUniv}]{\Gamma \vdash {\sf symbol}= {\sf symbol}: {\Bbb U}_{I}}{
\begin{stack}
\Gamma \vdash I: {\sf level}
\end{stack}}
\]

\[
\infer[{\tt symbol_eqbType}]{\Gamma \vdash {\sf symbol_eqb}: {\sf arrow}\,{\sf symbol}\,({\sf arrow}\,{\sf symbol}\,{\sf bool})}{}
\]

\[
\infer[{\tt symbol_eqbSpec1}]{\Gamma \vdash {\sf symbol_eqb}\,M\,N= {\sf true}: {\sf bool}}{
\begin{stack}
\Gamma \vdash M= N: {\sf symbol}
\end{stack}}
\]

\[
\infer[{\tt symbol_eqbSpec2}]{\Gamma \vdash M= N: {\sf symbol}}{
\begin{stack}
\Gamma \vdash {\sf symbol_eqb}\,M\,N= {\sf true}: {\sf bool}
\end{stack}}
\]

\[
\infer[{\tt symbolTotal}]{\Gamma \vdash {\sf halts}\,M}{
\begin{stack}
\Gamma \vdash M: {\sf symbol}
\end{stack}}
\]

\[
\infer[{\tt symbolStrict}]{\Gamma \vdash {\sf subtype}\,{\sf symbol}\,({\sf partial}\,{\sf symbol})}{}
\]

\[
\infer[{\tt symbolUptype}]{\Gamma \vdash {\sf uptype}\,{\sf symbol}}{}
\]

\[
\infer[{\tt symbolAdmiss}]{\Gamma \vdash {\sf admiss}\,{\sf symbol}}{}
\]

\[
\infer[{\tt symbolSequal}]{\Gamma \vdash {\sf sequal}\,M\,N}{
\begin{stack}
\Gamma \vdash M= N: {\sf symbol}
\end{stack}}
\]

